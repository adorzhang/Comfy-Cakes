(()=>{"use strict";var e,t,s,i={114:(e,t,s)=>{var i,a,r,n,o,h,l,c,d=s(260),p=s.n(d);!function(e){e.BROWN="BROWN_FLOUR",e.PINK="PINK_FLOUR",e.YELLOW="YELLOW_FLOUR"}(i||(i={})),function(e){e.BROWN="BROWN_CREAM",e.PINK="PINK_CREAM",e.YELLOW="YELLOW_CREAM"}(a||(a={})),function(e){e.RED="RED_RIBBON",e.GREEN="GREEN_RIBBON",e.WHITE="GREEN_RIBBON"}(r||(r={})),function(e){e.BUTTONS="BUTTONS_DECORATE",e.HEART="HEART_DECORATE",e.LEAF="LEAF_DECORATE",e.EMOTICON="EMOTICON"}(n||(n={})),function(e){e.CIRCLE="CIRCLE_FRAME",e.SQUARE="SQUARE_FRAME",e.HEART="HEART_FRAME"}(o||(o={})),function(e){e.BURN="BURN_TASTE",e.SPICE="SPICE_TASTE"}(h||(h={})),function(e){e[e.FRAME=0]="FRAME",e[e.FLOUR=1]="FLOUR",e[e.RIBBON=2]="RIBBON",e[e.CREAM=3]="CREAM",e[e.DECORATE=4]="DECORATE",e[e.TASTE=5]="TASTE"}(l||(l={})),function(e){e[e.EASY=1]="EASY",e[e.INTERMEDIATE=2]="INTERMEDIATE",e[e.ADVANCED=3]="ADVANCED"}(c||(c={}));class m{}m.VERSION="0.0",m.DEVELOPMENT=!0,m.SAVED_GAME_DATA_KEY="comfy-cakes-key",m.LANGUAGE_ENGLISH="en",m.VERBOSE=!1,m.DELAY=5;class u{static areValidDomains(e){if(0===e.length)return!0;const t=window.location.hostname,s=document.referrer;let i=!1;for(let s=0;s<e.length;s++)if(-1!==t.indexOf(e[s])){i=!0;break}if(s){i=!1;for(let t=0;t<e.length;t++)if(-1!==s.indexOf(e[t])){i=!0;break}}return i}static fixNumber(e){return isNaN(e)?0:Math.round(1e5*e)/1e5}static formatTime(e){if(isNaN(e)||e>86400)return{str:"0:00:00",h:"00",m:"00",s:"00"};const t=Math.floor(e/3600),s=Math.floor((e-3600*t)/60),i=e-3600*t-60*s;let a=t.toString(),r=s.toString(),n=i.toString();return t<10&&(a="0"+t),s<10&&(r="0"+s),i<10&&(n="0"+i),{str:a+":"+r+":"+n,h:a,m:r,s:n}}static formatNumber(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}static getDate(){const e=new Date,t=e.getUTCDate();let s,i="";switch(e.getUTCDay()){case 0:i=u.gameText[u.gameData.language].SUNDAY;break;case 1:i=u.gameText[u.gameData.language].MONDAY;break;case 2:i=u.gameText[u.gameData.language].TUESDAY;break;case 3:i=u.gameText[u.gameData.language].WEDNESDAY;break;case 4:i=u.gameText[u.gameData.language].THURSDAY;break;case 5:i=u.gameText[u.gameData.language].FRIDAY;break;case 6:i=u.gameText[u.gameData.language].SATURDAY}return s=t%10==1?t+"st":t%10==2?t+"nd":t%10==3?t+"rd":t+"th",i+" "+s}}class g{static init(){u.development=!1,this.currentInstance=this,u.currentScene.game.device.os.desktop,g.readGameData()}static readGameData(){g.getGameStorageData(m.SAVED_GAME_DATA_KEY,(function(e){u.gameData=e?JSON.parse(e):{googleUser:null,soundMuted:!1,musicMuted:!1,language:m.LANGUAGE_ENGLISH,score:0,tutorialSeen:!1},g.startGame()}))}static startGame(){u.currentScene.scene.start("Preload")}static getGameStorageData(e,t){t(localStorage.getItem(e))}static enterPlayScene(){u.currentScene.scene.start("PlayScene")}static enterMenuScene(){u.currentScene.scene.start("MenuScene")}static setCurrentScene(e){u.currentScene&&(u.prevScene=u.currentScene.scene.key),u.currentScene=e}static reset(){u.gameOver?g.enterMenuScene():g.enterPlayScene()}static writeGameData(){g.setGameStorageData(m.SAVED_GAME_DATA_KEY,u.gameData,(function(){g.log("game data successfully saved")}))}static log(e,t){m.VERBOSE&&(t?console.error(e+":",t):console.log(e))}static getTimeUntilEndOfDay(){const e=new Date;return 86400-60*e.getUTCHours()*60-60*e.getUTCMinutes()-e.getUTCSeconds()}static setGameStorageData(e,t,s){localStorage.setItem(e,JSON.stringify(t)),s()}static hashCode(e){return e.split("").reduce((function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e}),0).toString()}}class f{constructor(e){let t,s,l,d,p,m;switch(this.features=[],e){case c.EASY:t=this.getRandom(o),this.features.push(t);for(let t=0;t<e;t++)s=this.getRandom(i),d=this.getRandom(a),p=this.getRandom(n),this.features.push(s),this.features.push(d),this.features.push(p);break;case c.INTERMEDIATE:t=this.getRandom(o);for(let o=0;o<e;o++)this.features.push(t),s=this.getRandom(i),l=this.getRandom(r),this.features.push(s),o<e-1&&this.features.push(l),o==e-1&&(d=this.getRandom(a),p=this.getRandom(n),this.features.push(d),this.features.push(p));break;case c.ADVANCED:t=this.getRandom(o);for(let o=0;o<e;o++)this.features.push(t),s=this.getRandom(i),l=this.getRandom(r),this.features.push(s),o<e-1&&this.features.push(l),o==e-1&&(d=this.getRandom(a),p=this.getRandom(n),m=this.getRandom(h),this.features.push(d),this.features.push(p),this.features.push(m))}}getRandom(e){const t=Object.keys(e);return e[t[Math.floor(Math.random()*t.length)]]}}class b extends p().GameObjects.Container{constructor(e,t,s){super(e,null!=t?t:0,null!=s?s:0),this.features=[],this.canMove=!0;const i=e.add.image(0,0,"comfy-spritesheet","tableCloths.png");this.add(i),this.tableCloth=i,e.add.existing(this),this.scaleX=this.scaleY=.9}}class y{static scaleFix(e,t,s){let i=t,a=s,r=Math.max(i/e.width,a/e.height);e.setScale(r)}static scaleSprite(e,t,s,i,a,r=!1){let n=y.getSpriteScale(e.width,e.height,t,s,i,r);e.setScale(n*a)}static scaleText(e,t,s,i,a,r=!1){let n=e.width,o=e.height,h=this.getSpriteScale(n,o,t,s,i,r);e.setScale(h*a)}static getSpriteScale(e,t,s,i,a,r=!1){let n=1,o=window.devicePixelRatio,h=(e*o+2*a)/s,l=(t*o+2*a)/i;return(h>1||l>1||r)&&(n=1/Math.max(h,l)),n*o}static getRand(e,t){return Math.floor(Math.random()*e+t)}static toRad(e){return e*(Math.PI/180)}static getPadding(e){let t=0;switch(e){case i.BROWN:case i.PINK:case i.YELLOW:case o.CIRCLE:case o.HEART:case o.SQUARE:t=-20;break;case r.GREEN:case r.RED:case r.WHITE:case a.BROWN:case a.PINK:case a.YELLOW:t=-5}return t}static calPaddingY(e){let t=0;for(let s=0;s<e.length;s++)e[s]!=i.BROWN&&e[s]!=i.PINK&&e[s]!=i.YELLOW&&(t+=this.getPadding(e[s]));return t}static getSize(e,t){let s=e.sys.game.scale.gameSize.height,i=0,a=e.sys.game.scale.gameSize.width,r=0;t.iterate(function(e){let t=e.x,n=e.y,o=e.displayWidth,h=e.displayHeight,l=n-h*e.originY,c=n+h*(1-e.originY),d=t-o*e.originX,p=t+o*(1-e.originY);c>i&&(i=c),l<s&&(s=l),d<a&&(a=d),p>r&&(r=p)}.bind(this));let n=Math.abs(s-i),o=Math.abs(r-a);t.setSize(o,n)}static checkOverlap(e,t,s=!1){let i,a;return s?(i=e.getBounds().setSize(10),a=t.getBounds().setSize(10)):(i=e.getBounds(),a=t.getBounds().setSize(t.displayWidth-2*e.displayWidth,t.displayHeight)),Phaser.Geom.Intersects.RectangleToRectangle(i,a)}}class E{constructor(e){this.scene=e.scene;const t=this.awake!==E.prototype.awake,s=this.start!==E.prototype.start,i=this.update!==E.prototype.update,a=this.destroy!==E.prototype.destroy;t&&this.scene.events.once("scene-awake",this.awake,this),s&&this.scene.events.once(p().Scenes.Events.UPDATE,this.start,this),i&&this.scene.events.on(p().Scenes.Events.UPDATE,this.update,this),(s||i||a)&&e.on(p().GameObjects.Events.DESTROY,(()=>{this.scene.events.off(p().Scenes.Events.UPDATE,this.start,this),this.scene.events.off(p().Scenes.Events.UPDATE,this.update,this),a&&this.destroy()}))}awake(){}start(){}update(){}destroy(){}}let _,S,v;class w extends E{constructor(e){super(e),this.alignVer="center",this.gameAreaVer=10,this.minLeftWidthVer=0,this.minRightWidthVer=0,this.minUpHeightVer=0,this.minDownHeightVer=0,this.alignHor="center",this.gameAreaHor=10,this.minLeftWidthHor=0,this.minRightWidthHor=0,this.minUpHeightHor=0,this.minDownHeightHor=0,this.gameObject=e,e.__AlignCanvas=this,e.scene.events.once("scene-awake",(()=>{this.startResizeComponent()}))}static getComponent(e){return e.__AlignCanvas}startResizeComponent(){S={gameArea:Math.abs(this.gameAreaVer),minLeftWidth:Math.abs(this.minLeftWidthVer),minRightWidth:Math.abs(this.minRightWidthVer),minUpHeight:Math.abs(this.minUpHeightVer),minDownHeight:Math.abs(this.minDownHeightVer)},v={gameArea:Math.abs(this.gameAreaHor),minLeftWidth:Math.abs(this.minLeftWidthHor),minRightWidth:Math.abs(this.minRightWidthHor),minUpHeight:Math.abs(this.minUpHeightHor),minDownHeight:Math.abs(this.minDownHeightHor)},_=this.gameObject.scene,_.scale.on("resize",this.resize,this),this.resize({width:_.scale.gameSize.width,height:_.scale.gameSize.height})}resize(e){let t=e.width,s=e.height;const i=globalThis.screenBaseSize.width,a=globalThis.screenBaseSize.height,r=_.cameras.main,n=Math.min(t/i,s/a);let o,h,l,c,d,p,m,u;t>s?(o=(v.minLeftWidth+v.minRightWidth)/(v.gameArea+v.minLeftWidth+v.minRightWidth),h=v.minLeftWidth/(v.gameArea+v.minLeftWidth+v.minRightWidth),l=v.minRightWidth/(v.gameArea+v.minLeftWidth+v.minRightWidth),c=(v.minUpHeight+v.minDownHeight)/(v.gameArea+v.minUpHeight+v.minDownHeight),d=v.minUpHeight/(v.gameArea+v.minUpHeight+v.minDownHeight),p=v.minDownHeight/(v.gameArea+v.minUpHeight+v.minDownHeight),m=v.gameArea/(v.gameArea+v.minLeftWidth+v.minRightWidth),u=v.gameArea/(v.gameArea+v.minUpHeight+v.minDownHeight)):(o=(S.minLeftWidth+S.minRightWidth)/(S.gameArea+S.minLeftWidth+S.minRightWidth),h=S.minLeftWidth/(S.gameArea+S.minLeftWidth+S.minRightWidth),l=S.minRightWidth/(S.gameArea+S.minLeftWidth+S.minRightWidth),c=(S.minUpHeight+S.minDownHeight)/(S.gameArea+S.minUpHeight+S.minDownHeight),d=S.minUpHeight/(S.gameArea+S.minUpHeight+S.minDownHeight),p=S.minDownHeight/(S.gameArea+S.minUpHeight+S.minDownHeight),m=S.gameArea/(S.gameArea+S.minLeftWidth+S.minRightWidth),u=S.gameArea/(S.gameArea+S.minUpHeight+S.minDownHeight));const g=i*n,f=a*n,b=t*m/g,y=s*u/f,E=Math.min(y,b);if(r.setZoom(n*E*(globalThis.zoomScalar||1)),t>s){const e=v.minUpHeight/(v.minDownHeight+v.minUpHeight)||0,i=-s*c*(.5*((v.minDownHeight/(v.minDownHeight+v.minUpHeight)||0)-e))-s/2;"right"==this.alignHor?(r.setViewport(-l*t-g/2*E,i,2*t,2*s),globalThis.gameAreaLeftX=t-l*t-g*E):"left"==this.alignHor?(r.setViewport(h*t-t+.5*g*E,i,2*t,2*s),globalThis.gameAreaLeftX=h*t):"center"==this.alignHor&&(r.setViewport((h-l)*t*.5-t/2,i,2*t,2*s),globalThis.gameAreaLeftX=.5*t-t*(l-h)*.5-.5*g*E),globalThis.gameAreaCenterX=.5*t-t*(l-h)*.5,globalThis.gameAreaCenterY=s-g*p-f*(1-c)*.5,globalThis.gameAreaTopY=globalThis.gameAreaCenterY-.5*f*E,globalThis.gameAreaBottomY=s-f*p,globalThis.gameAreaRightX=globalThis.gameAreaLeftX+g*E,globalThis.gameAreaAvailableSpace={left:globalThis.gameAreaLeftX,right:t-globalThis.gameAreaRightX,top:globalThis.gameAreaTopY,bottom:s-globalThis.gameAreaBottomY}}else{const e=S.minLeftWidth/(S.minLeftWidth+S.minRightWidth)||0,i=-t*o*(.5*((S.minRightWidth/(S.minLeftWidth+S.minRightWidth)||0)-e))-t/2;"bottom"==this.alignVer?(r.setViewport(i,-p*s-f/2*E,2*t,2*s),globalThis.gameAreaTopY=s-p*s-f*E):"top"==this.alignVer?(r.setViewport(i,d*s-s+f/2*E,2*t,2*s),globalThis.gameAreaTopY=d*s):"center"==this.alignVer&&(r.setViewport(i,(d-p)*s*.5-s/2,2*t,2*s),globalThis.gameAreaTopY=.5*s+s*(d-p)*.5-.5*f*E),globalThis.gameAreaLeftX=.5*t-t*(l-h)*.5-.5*g*E,globalThis.gameAreaRightX=globalThis.gameAreaLeftX+g*E,globalThis.gameAreaBottomY=globalThis.gameAreaTopY+f*E,globalThis.gameAreaCenterX=globalThis.gameAreaLeftX+g*E*.5,globalThis.gameAreaCenterY=globalThis.gameAreaTopY+f*E*.5,globalThis.gameAreaAvailableSpace={left:globalThis.gameAreaLeftX,right:t-globalThis.gameAreaRightX,top:globalThis.gameAreaTopY,bottom:s-globalThis.gameAreaBottomY}}r.scrollX=.5*i-.5*r.width,r.scrollY=.5*a-.5*r.height}}class C extends p().GameObjects.Sprite{constructor(e,t,s,i,a){super(e,null!=t?t:0,null!=s?s:0,i||"comfy-spritesheet",null!=a?a:"left_carousel_00.png"),this.setOrigin(0,0)}}var O;!function(e){e.DESTROY="destroy",e.INIT="init"}(O||(O={}));const R=O;class k{constructor(e){this._events=new(p().Events.EventEmitter),this._events=new(p().Events.EventEmitter)}destroy(e=!1){this._events.emit(R.DESTROY,this),this._events.destroy()}get events(){return this._events}get scene(){return(e=this.getGameObject())?e.scene:null;var e}}class T extends k{getVisibleComponent(){return this.getGameObject()}}var A;!function(e){e.DOUBLE_PRESS="buttonDoublePress",e.INIT_INTERACTIVE_DATA="buttonInitInteractiveData",e.POINTER_DOWN="buttonPointerDown",e.POINTER_OUT="buttonPointerOut",e.POINTER_OVER="buttonPointerOver",e.POINTER_UP="buttonPointerUp",e.SLEEP="buttonSleep",e.SOUND_COMPLETE="buttonSoundComplete",e.WAKE="buttonWake"}(A||(A={}));const x=A;class I extends T{constructor(e){super(e),this.context=this.scene,this.eventName="",this.defaultEnabled=!0,this.pressedSoundKey="",this.downSoundKey="",this.gameObject=e,e.__ButtonComponent=this,this.gameObject?(this.scene.events.on(p().Scenes.Events.UPDATE,this.onSceneUpdate,this),this.gameObject.once(p().GameObjects.Events.DESTROY,this.onDestroy,this)):console.warn("No Phaser game object specified in ButtonComponent constructor."),this.doublePressMaxTime=I.DEFAULT_DOUBLE_PRESS_MAX_TIME,this.doublePressSize=I.DEFAULT_DOUBLE_PRESS_SIZE,this._isDoublePressEnabled=!1}static getComponent(e){return e.__ButtonComponent}destroy(e=!1){super.destroy(e),this.resetCursorIfOverOrDown(),this.updateAfterNonVisible(),this.destroyDoublePressTimer(),this.scene&&(this.scene.events.off(p().Scenes.Events.UPDATE,this.onSceneUpdate,this),this.scene.events.off(p().Scenes.Events.SLEEP,this.onSceneSleep,this)),e||this.gameObject&&(this.gameObject.off(p().GameObjects.Events.DESTROY,this.onDestroy,this),this.gameObject.destroy()),this.gameObject=null}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.gameObject&&this.gameObject.input&&(this.gameObject.input.enabled=this._enabled),this._enabled?this.updateAfterEnabled():this.updateAfterDisable()}getGameObject(){return this.gameObject}get isDoublePressEnabled(){return this._isDoublePressEnabled}set isDoublePressEnabled(e){this._isDoublePressEnabled=e,this._isDoublePressEnabled||this.destroyDoublePressTimer()}get isDown(){return this._isDown}get isOver(){return this._isOver}static ResolveFrame(e){let t=0;for(;t<e.length-1;t+=1){const s=e[t];if(s)return s}return e[t]}updateButtonImage(){const e=this.getGameObject();if(!I.IsTextureImage(e))return;let t;t=this.enabled?this._isDown?this._isOver?I.ResolveFrame([this.downFrame,this.overFrame,this.normFrame]):this.normFrame:this._isOver?I.ResolveFrame([this.overFrame,this.normFrame]):this.normFrame:I.ResolveFrame([this.disabledFrame,this.normFrame]),t&&e.setTexture(t.key,t.frame)}get visible(){const e=this.getVisibleComponent();return e&&e.visible}set visible(e){const t=this.getVisibleComponent();t&&(t.visible=e)}destroyDoublePressTimer(){this.doublePressTimer&&(this.doublePressTimer.destroy(),this.doublePressTimer=null)}doublePressAction(){this.events.emit(x.DOUBLE_PRESS,this)}handleInputDoublePress(e,t){this.isHandlingDoublePress?this.handleInputDoublePressPhase2(e,t):this.handleInputDoublePressPhase1(e,t)}handleInputDoublePressPhase1(e,t){this.doublePressTimer=this.scene.time.addEvent({delay:this.doublePressMaxTime,callback:this.onDoublePressTimerComplete,callbackScope:this}),this.lastPressTime=this.scene.game.loop.now,this.isHandlingDoublePress=!0,this.doublePressArea=new(p().Geom.Rectangle)(e-this.doublePressSize/2,t-this.doublePressSize/2,this.doublePressSize,this.doublePressSize),this.handleInputDown()}handleInputDoublePressPhase2(e,t){this.isHandlingDoublePress=!1;const s=this.scene.game.loop.now-this.lastPressTime;this.doublePressArea.contains(e,t)&&s<this.doublePressMaxTime&&(this.destroyDoublePressTimer(),this.doublePressAction())}handleInputDown(){this._isDown=!0,I.capturedButton=this,this.updateButtonImage(),this.scene.input.once(p().Input.Events.POINTER_UP,this.onScenePointerUp,this),this.playDownSound(),this.events.emit(x.POINTER_DOWN,this)}handleInputOut(){const e=I.capturedButton;e?e===this?(this._isOver=!1,this.updateButtonImage()):I.overNonCapturedButton=null:(this._isOver=!1,this.updateButtonImage()),this.events.emit(x.POINTER_OUT,this)}handleInputOver(){const e=I.capturedButton;e?e===this?(this._isOver=!0,this.updateButtonImage()):I.overNonCapturedButton=this:this.scene.input.activePointer.primaryDown?(I.overNonCapturedButton=this,this.scene.input.once(p().Input.Events.POINTER_UP,this.onScenePointerUp,this)):(this._isOver=!0,this.updateButtonImage()),this.events.emit(x.POINTER_OVER,this)}handleInputUp(){const e=I.capturedButton;I.capturedButton=null,e===this&&(this._isDown=!1,this.events.emit(x.POINTER_UP,this),this._isOver&&(this.updateButtonImage(),this.isHandlingDoublePress||this.handlePressed()));const t=I.overNonCapturedButton;t&&(I.overNonCapturedButton=null,t.handleInputOver())}handlePressed(){this.playPressedSound(),this.callback&&this.callback.call(this.context,this),this.eventName&&this.scene.events.emit(this.eventName,this)}init(){this._isInit=!0;const e={pixelPerfect:!1,useHandCursor:!0};this.events.emit(x.INIT_INTERACTIVE_DATA,e),void 0===e.pixelPerfect&&(e.pixelPerfect=!1),void 0===e.useHandCursor&&(e.useHandCursor=!0),this.inputConfig=e,this.gameObject&&(this.gameObject.setInteractive(this.inputConfig),this.gameObject.on(p().Input.Events.GAMEOBJECT_POINTER_DOWN,this.onInputDown,this),this.gameObject.on(p().Input.Events.GAMEOBJECT_POINTER_OVER,this.onInputOver,this),this.gameObject.on(p().Input.Events.GAMEOBJECT_POINTER_OUT,this.onInputOut,this)),void 0!==this._enabled?this.enabled=this._enabled:this.enabled=this.defaultEnabled,this.lastIsVisible=this.isVisibleChain(),this.scene.events.once(p().Scenes.Events.SLEEP,this.onSceneSleep,this),this.events.emit(R.INIT,this)}static IsTextureImage(e){return e&&"setTexture"in e}isVisibleChain(){const e=this.getVisibleComponent();if(!e||!e.visible)return!1;let t=this.gameObject?this.gameObject.parentContainer:null;for(;t;){if(!t.visible)return!1;t=t.parentContainer}return!0}onDestroy(){this.destroy(!0)}onDoublePressTimerComplete(){this.destroyDoublePressTimer(),this.isHandlingDoublePress=!1,this.isOver&&!this.isDown&&this.handlePressed()}onInputDown(e,t,s,i){this.isDoublePressEnabled?this.handleInputDoublePress(t,s):this.handleInputDown(),i.stopPropagation()}onInputOut(e,t){this.handleInputOut(),t.stopPropagation()}onInputOver(e,t,s,i){this.handleInputOver(),i.stopPropagation()}onScenePointerUp(){this.handleInputUp()}onSceneSleep(){this.resetCursorIfOverOrDown(),this._isDown=!1,this._isOver=!1,this.updateCapturedStatesAfterOff(),this.scene.input.off(p().Input.Events.POINTER_UP,this.onScenePointerUp,this),this.scene.events.once(p().Scenes.Events.WAKE,this.onSceneWake,this),this.events.emit(x.SLEEP,this)}onSceneUpdate(){this._isInit?this.updatePostInit():this.updatePreInit()}onSceneWake(){this.updateButtonImage(),this.scene.events.once(p().Scenes.Events.SLEEP,this.onSceneSleep,this),this.events.emit(x.WAKE,this)}onSoundComplete(e){this.events.emit(x.SOUND_COMPLETE,this,e.key),e.destroy()}playDownSound(){this.playSound(this.downSoundKey)}playPressedSound(){this.playSound(this.pressedSoundKey)}playSound(e){if(!e)return;const t=this.scene.sound.add(e);t.once(p().Sound.Events.COMPLETE,this.onSoundComplete,this),t.play()}resetCursorIfOverOrDown(){if(this.isOver||this.isDown){const e=this.scene.input.manager;e.canvas.style.cursor=e.defaultCursor}}updateAfterDisable(){this.resetCursorIfOverOrDown(),this._isDown=!1,this._isOver=!1,this.updateButtonImage()}updateAfterEnabled(){const e=this.scene.input,t=e.hitTestPointer(e.activePointer);this._isOver=t.indexOf(this.gameObject)>-1,this.updateButtonImage()}updateAfterNonVisible(){this.resetCursorIfOverOrDown(),this._isDown=!1,this._isOver=!1,this.updateCapturedStatesAfterOff(),this.scene&&this.scene.input.off(p().Input.Events.POINTER_UP,this.onScenePointerUp,this),this.gameObject&&this.gameObject.removeInteractive()}updateAfterVisible(){this.gameObject&&(this.gameObject.setInteractive(this.inputConfig),this.enabled?this.scene.input.hitTestPointer(this.scene.input.activePointer).indexOf(this.gameObject)>-1&&this.handleInputOver():this.enabled=!1)}updateCapturedStatesAfterOff(){if(I.capturedButton===this){I.capturedButton=null;const e=I.overNonCapturedButton;e&&(I.overNonCapturedButton=null,e.handleInputOver())}else I.overNonCapturedButton===this&&(I.overNonCapturedButton=null)}updateSceneEnabled(){if(!this.isVisibleChain)return;const e=this.scene?this.scene.input:null;e&&this.wasSceneInputEnabled!==e.enabled&&(this.wasSceneInputEnabled=e.enabled,this.wasSceneInputEnabled?this.updateAfterEnabled():this.updateAfterDisable())}updatePostInit(){this.updateVisibility(),this.updateSceneEnabled()}updatePreInit(){this.init()}updateVisibility(){const e=this.isVisibleChain();this.lastIsVisible!==e&&(this.lastIsVisible=e,this.lastIsVisible?this.updateAfterVisible():this.updateAfterNonVisible())}}I.WAIT_ITEM_TYPE="buttonComponent",I.DEFAULT_DOUBLE_PRESS_MAX_TIME=350,I.DEFAULT_DOUBLE_PRESS_SIZE=2;const P=I;class D extends p().GameObjects.Sprite{constructor(e,t,s,i,a){super(e,null!=t?t:0,null!=s?s:0,i||"comfy-spritesheet",null!=a?a:"right_carousel_00.png"),this.setOrigin(0,0)}}class N extends p().GameObjects.Container{constructor(e,t,s){super(e,null!=t?t:0,null!=s?s:0),this.isStart=!1;const i=e.add.image(0,0,"comfy-spritesheet","bg_timer.png");i.setOrigin(0,0),this.add(i);const a=e.add.image(10,24,"comfy-spritesheet","seek.png");a.setOrigin(.5,1),this.add(a),this.seeker=a}start(){this.timedEvent=this.scene.time.addEvent({delay:1e3,callback:this.onEvent,callbackScope:this,timeScale:8,loop:!0}),this.isStart=!0}stop(){this.isStart=!1,this.seeker.x=5}pause(){this.timedEvent.paused=!0,this.isStart=!1}resume(){this.timedEvent.paused=!1,this.isStart=!0}reset(){this.seeker.x=5}onEvent(e){}update(){this.isStart&&(this.seeker.x+=this.timedEvent.getProgress()/5,this.seeker.x>40&&(this.seeker.x=5,this.emit("reset")))}}class H extends p().GameObjects.Sprite{constructor(e,t,s,i,a){super(e,null!=t?t:0,null!=s?s:0,i||"comfy-spritesheet",null!=a?a:"alarm_light.png"),this.setOrigin(0,0)}}class L extends p().GameObjects.Sprite{constructor(e,t,s,i,a){super(e,null!=t?t:0,null!=s?s:0,i||"comfy-spritesheet",null!=a?a:"desk_star_00.png"),this.setOrigin(0,0)}}class F extends p().GameObjects.Container{constructor(e,t,s){super(e,null!=t?t:0,null!=s?s:0),this.carouselCenterLeft=[];const i=e.add.sprite(0,0,"comfy-spritesheet","center_l_carousel_00.png");i.setOrigin(0,0),this.add(i);const a=e.add.sprite(100,0,"comfy-spritesheet","center_l_carousel_00.png");a.setOrigin(0,0),this.add(a);const r=e.add.sprite(200,0,"comfy-spritesheet","center_l_carousel_00.png");r.setOrigin(0,0),this.add(r);const n=e.add.sprite(300,0,"comfy-spritesheet","center_l_carousel_00.png");n.setOrigin(0,0),this.add(n);const o=e.add.sprite(400,0,"comfy-spritesheet","center_l_carousel_00.png");o.setOrigin(0,0),this.add(o);const h=e.add.sprite(500,0,"comfy-spritesheet","center_l_carousel_00.png");h.setOrigin(0,0),this.add(h);const l=new L(e,663,7);this.add(l);const c=e.add.sprite(600,0,"comfy-spritesheet","center_r_carousel_00.png");c.setOrigin(0,0),this.add(c),this.carouselOne=i,this.carouselTwo=a,this.carouselThree=r,this.carouselFour=n,this.carouselFive=o,this.carouselSix=h,this.desk=l,this.carouselCenterRight=c,this.carouselCenterLeft.push(this.carouselOne),this.carouselCenterLeft.push(this.carouselTwo),this.carouselCenterLeft.push(this.carouselThree),this.carouselCenterLeft.push(this.carouselFour),this.carouselCenterLeft.push(this.carouselFive),this.carouselCenterLeft.push(this.carouselSix),this.scene.events.once(p().Scenes.Events.UPDATE,this.start,this),this.scene.events.on(p().Scenes.Events.UPDATE,this.update,this)}start(){}update(e,t){}playNext(){this.carouselCenterRight.play("center-right-animation",!0);for(let e=0;e<this.carouselCenterLeft.length;e++)this.carouselCenterLeft[e].play("center-left-animation",!0)}playPrev(){this.carouselCenterRight.playReverse("center-right-animation",!0);for(let e=0;e<this.carouselCenterLeft.length;e++)this.carouselCenterLeft[e].playReverse("center-left-animation",!0)}openDesk(){this.scene.add.tween({targets:this.desk,x:"-=124",duration:200,yoyo:!0})}}class Y extends p().GameObjects.Sprite{constructor(e,t,s,i,a){super(e,null!=t?t:0,null!=s?s:0,i||"comfy-spritesheet",null!=a?a:"trash_09.png"),this.setOrigin(.5,0)}}class B extends p().GameObjects.Container{constructor(e,t,s){super(e,null!=t?t:0,null!=s?s:0);const i=e.add.image(0,0,"comfy-spritesheet","frame_tv.png");i.setOrigin(0,0),this.add(i);const a=e.add.image(62,85,"comfy-spritesheet","screen_tv.png");this.add(a);const r=e.add.container(65,132);r.scaleX=.8,r.scaleY=.8,this.add(r),this.modelContainer=r}createImage(e){let t,s,l,c,d,p=0;for(let m=0;m<e.features.length;m++)null!=e.features[0]&&(e.features[0]==o.CIRCLE?e.features[m]==i.BROWN?(p+=y.getPadding(e.features[m]),t=this.scene.add.image(0,-5+p,"comfy-spritesheet","brown_circle_06.png"),this.modelContainer.add(t)):e.features[m]==i.PINK?(p+=y.getPadding(e.features[m]),t=this.scene.add.image(0,-5+p,"comfy-spritesheet","pink_circle_06.png"),this.modelContainer.add(t)):e.features[m]==i.YELLOW?(p+=y.getPadding(e.features[m]),t=this.scene.add.image(0,-5+p,"comfy-spritesheet","yellow_circle_06.png"),this.modelContainer.add(t)):e.features[m]==r.RED?(p+=y.getPadding(e.features[m]),c=this.scene.add.image(0,-15+p,"comfy-spritesheet","red_ribbon_circle.png"),this.modelContainer.add(c)):e.features[m]==r.GREEN?(p+=y.getPadding(e.features[m]),c=this.scene.add.image(0,-15+p,"comfy-spritesheet","green_ribbon_circle.png"),this.modelContainer.add(c)):e.features[m]==r.WHITE?(p+=y.getPadding(e.features[m]),c=this.scene.add.image(0,-15+p,"comfy-spritesheet","white_ribbon_circle.png"),this.modelContainer.add(c)):e.features[m]==a.BROWN?(p+=y.getPadding(e.features[m]),s=this.scene.add.image(0,-15+p,"comfy-spritesheet","brown_cream_circle.png"),this.modelContainer.add(s)):e.features[m]==a.PINK?(p+=y.getPadding(e.features[m]),s=this.scene.add.image(0,-15+p,"comfy-spritesheet","pink_cream_circle.png"),this.modelContainer.add(s)):e.features[m]==a.YELLOW?(p+=y.getPadding(e.features[m]),s=this.scene.add.image(0,-15+p,"comfy-spritesheet","yellow_cream_circle.png"),this.modelContainer.add(s)):e.features[m]==n.BUTTONS?(p+=y.getPadding(e.features[m]),l=this.scene.add.image(0,p-20,"comfy-spritesheet","buttons_icon.png").setOrigin(.5),this.modelContainer.add(l)):e.features[m]==n.EMOTICON?(p+=y.getPadding(e.features[m]),l=this.scene.add.image(0,p-20,"comfy-spritesheet","emoticon_icon.png").setOrigin(.5),this.modelContainer.add(l)):e.features[m]==n.HEART?(p+=y.getPadding(e.features[m]),l=this.scene.add.image(0,p-20,"comfy-spritesheet","heart_icon.png").setOrigin(.5),this.modelContainer.add(l)):e.features[m]==n.LEAF?(p+=y.getPadding(e.features[m]),l=this.scene.add.image(0,p-20,"comfy-spritesheet","leaf_icon.png").setOrigin(.5),this.modelContainer.add(l)):e.features[m]==h.BURN?e.features[m-2]==a.BROWN?s.setFrame("brown_burn_circle.png"):e.features[m-2]==a.PINK?s.setFrame("pink_burn_circle.png"):e.features[m-2]==a.YELLOW&&s.setFrame("yellow_burn_circle.png"):e.features[m]==h.SPICE&&(p+=y.getPadding(e.features[m]),d=this.scene.add.image(0,-20+p,"comfy-spritesheet","spice_circle.png"),this.modelContainer.add(d)):e.features[0]==o.HEART?e.features[m]==i.BROWN?(p+=y.getPadding(e.features[m]),t=this.scene.add.image(0,-5+p,"comfy-spritesheet","brown_heart_06.png"),this.modelContainer.add(t)):e.features[m]==i.PINK?(p+=y.getPadding(e.features[m]),t=this.scene.add.image(0,-5+p,"comfy-spritesheet","pink_heart_06.png"),this.modelContainer.add(t)):e.features[m]==i.YELLOW?(p+=y.getPadding(e.features[m]),t=this.scene.add.image(0,-5+p,"comfy-spritesheet","yellow_heart_06.png"),this.modelContainer.add(t)):e.features[m]==r.RED?(p+=y.getPadding(e.features[m]),c=this.scene.add.image(0,-15+p,"comfy-spritesheet","red_ribbon_heart.png"),this.modelContainer.add(c)):e.features[m]==r.GREEN?(p+=y.getPadding(e.features[m]),c=this.scene.add.image(0,-15+p,"comfy-spritesheet","green_ribbon_heart.png"),this.modelContainer.add(c)):e.features[m]==r.WHITE?(p+=y.getPadding(e.features[m]),c=this.scene.add.image(0,-15+p,"comfy-spritesheet","white_ribbon_heart.png"),this.modelContainer.add(c)):e.features[m]==a.BROWN?(p+=y.getPadding(e.features[m]),s=this.scene.add.image(0,-15+p,"comfy-spritesheet","brown_cream_heart.png"),this.modelContainer.add(s)):e.features[m]==a.PINK?(p+=y.getPadding(e.features[m]),s=this.scene.add.image(0,-15+p,"comfy-spritesheet","pink_cream_heart.png"),this.modelContainer.add(s)):e.features[m]==a.YELLOW?(p+=y.getPadding(e.features[m]),s=this.scene.add.image(0,-15+p,"comfy-spritesheet","yellow_cream_heart.png"),this.modelContainer.add(s)):e.features[m]==n.BUTTONS?(p+=y.getPadding(e.features[m]),l=this.scene.add.image(0,p-20,"comfy-spritesheet","buttons_icon.png").setOrigin(.5),this.modelContainer.add(l)):e.features[m]==n.EMOTICON?(p+=y.getPadding(e.features[m]),l=this.scene.add.image(0,p-20,"comfy-spritesheet","emoticon_icon.png").setOrigin(.5),this.modelContainer.add(l)):e.features[m]==n.HEART?(p+=y.getPadding(e.features[m]),l=this.scene.add.image(0,p-20,"comfy-spritesheet","heart_icon.png").setOrigin(.5),this.modelContainer.add(l)):e.features[m]==n.LEAF?(p+=y.getPadding(e.features[m]),l=this.scene.add.image(0,p-20,"comfy-spritesheet","leaf_icon.png").setOrigin(.5),this.modelContainer.add(l)):e.features[m]==h.BURN?e.features[m-2]==a.BROWN?s.setFrame("brown_burn_heart.png"):e.features[m-2]==a.PINK?s.setFrame("pink_burn_heart.png"):e.features[m-2]==a.YELLOW&&s.setFrame("yellow_burn_heart.png"):e.features[m]==h.SPICE&&(p+=y.getPadding(e.features[m]),d=this.scene.add.image(0,-20+p,"comfy-spritesheet","spice_heart.png"),this.modelContainer.add(d)):e.features[0]==o.SQUARE&&(e.features[m]==i.BROWN?(p+=y.getPadding(e.features[m]),t=this.scene.add.image(0,-5+p,"comfy-spritesheet","brown_square_06.png"),this.modelContainer.add(t)):e.features[m]==i.PINK?(p+=y.getPadding(e.features[m]),t=this.scene.add.image(0,-5+p,"comfy-spritesheet","pink_square_06.png"),this.modelContainer.add(t)):e.features[m]==i.YELLOW?(p+=y.getPadding(e.features[m]),t=this.scene.add.image(0,-5+p,"comfy-spritesheet","yellow_square_06.png"),this.modelContainer.add(t)):e.features[m]==r.RED?(p+=y.getPadding(e.features[m]),c=this.scene.add.image(0,-15+p,"comfy-spritesheet","red_ribbon_square.png"),this.modelContainer.add(c)):e.features[m]==r.GREEN?(p+=y.getPadding(e.features[m]),c=this.scene.add.image(0,-15+p,"comfy-spritesheet","green_ribbon_square.png"),this.modelContainer.add(c)):e.features[m]==r.WHITE?(p+=y.getPadding(e.features[m]),c=this.scene.add.image(0,-15+p,"comfy-spritesheet","white_ribbon_square.png"),this.modelContainer.add(c)):e.features[m]==a.BROWN?(p+=y.getPadding(e.features[m]),s=this.scene.add.image(0,-15+p,"comfy-spritesheet","brown_cream_square.png"),this.modelContainer.add(s)):e.features[m]==a.PINK?(p+=y.getPadding(e.features[m]),s=this.scene.add.image(0,-15+p,"comfy-spritesheet","pink_cream_square.png"),this.modelContainer.add(s)):e.features[m]==a.YELLOW?(p+=y.getPadding(e.features[m]),s=this.scene.add.image(0,-15+p,"comfy-spritesheet","yellow_cream_square.png"),this.modelContainer.add(s)):e.features[m]==n.BUTTONS?(p+=y.getPadding(e.features[m]),l=this.scene.add.image(0,p-20,"comfy-spritesheet","buttons_icon.png").setOrigin(.5),this.modelContainer.add(l)):e.features[m]==n.EMOTICON?(p+=y.getPadding(e.features[m]),l=this.scene.add.image(0,p-20,"comfy-spritesheet","emoticon_icon.png").setOrigin(.5),this.modelContainer.add(l)):e.features[m]==n.HEART?(p+=y.getPadding(e.features[m]),l=this.scene.add.image(0,p-20,"comfy-spritesheet","heart_icon.png").setOrigin(.5),this.modelContainer.add(l)):e.features[m]==n.LEAF?(p+=y.getPadding(e.features[m]),l=this.scene.add.image(0,p-20,"comfy-spritesheet","leaf_icon.png").setOrigin(.5),this.modelContainer.add(l)):e.features[m]==h.BURN?e.features[m-2]==a.BROWN?s.setFrame("brown_burn_square.png"):e.features[m-2]==a.PINK?s.setFrame("pink_burn_square.png"):e.features[m-2]==a.YELLOW&&s.setFrame("yellow_burn_square.png"):e.features[m]==h.SPICE&&(p+=y.getPadding(e.features[m]),d=this.scene.add.image(0,-20+p,"comfy-spritesheet","spice_square.png"),this.modelContainer.add(d))))}clearChild(){this.modelContainer.removeAll(!0)}}class W extends p().GameObjects.Image{constructor(e,t,s,i,a){super(e,null!=t?t:0,null!=s?s:0,i||"comfy-spritesheet",null!=a?a:"bullet_icon.png"),this.setOrigin(0,0)}}class U extends p().GameObjects.Container{constructor(e,t,s){super(e,null!=t?t:0,null!=s?s:0),this.current=0,this.bullets=[];const i=e.add.image(0,0,"comfy-spritesheet","result_tv.png");i.setOrigin(0,0),this.add(i);const a=new W(e,14,22);a.visible=!1,this.add(a);const r=new W(e,35,22);r.visible=!1,this.add(r);const n=new W(e,56,22);n.visible=!1,this.add(n);const o=new W(e,77,22);o.visible=!1,this.add(o);const h=new W(e,14,42.5);h.visible=!1,this.add(h);const l=new W(e,35,42.5);l.visible=!1,this.add(l);const c=e.add.sprite(52,39,"comfy-spritesheet","tran_00.png");c.visible=!1,this.add(c),this.bulletOne=a,this.bulletTwo=r,this.bulletThree=n,this.bulletFour=o,this.bulletFive=h,this.bulletSix=l,this.tran=c,this.bullets.push(this.bulletOne),this.bullets.push(this.bulletTwo),this.bullets.push(this.bulletThree),this.bullets.push(this.bulletFour),this.bullets.push(this.bulletFive),this.bullets.push(this.bulletSix)}start(){for(let e=0;e<this.bullets.length;e++)this.bullets[e].visible=!1,this.bullets[e].setFrame("bullet_icon.png")}cakeNum(e){if(!(e>this.bullets.length))for(let t=0;t<e;t++)this.bullets[t].visible=!0}setStatusAt(e,t){let s=t?"pass_icon.png":"x_icon.png";this.bullets[e].setFrame(s),t||(this.bullets[e].alpha=0,this.scene.add.tween({targets:this.bullets[e],alpha:1,repeat:2,duration:200,onComplete:()=>{this.bullets[e].setFrame("bullet_icon.png")}}))}update(e,t){}}class M extends p().GameObjects.Container{constructor(e,t,s){super(e,null!=t?t:-12,null!=s?s:-96);const i=e.add.sprite(-11,79,"comfy-spritesheet","leg_left.png");this.add(i);const a=e.add.sprite(16,-6,"comfy-spritesheet","face.png");this.add(a);const r=e.add.sprite(16,-75,"comfy-spritesheet","head.png");this.add(r);const n=e.add.sprite(-18,-9,"comfy-spritesheet","eye_left_03.png");this.add(n);const o=e.add.sprite(42,-9,"comfy-spritesheet","eye_right_00.png");this.add(o);const h=e.add.sprite(19,58,"comfy-spritesheet","body.png");this.add(h);const l=e.add.sprite(41,79,"comfy-spritesheet","leg_right.png");this.add(l);const c=e.add.sprite(48,55,"comfy-spritesheet","hand_right.png");this.add(c);const d=e.add.sprite(-17,44,"comfy-spritesheet","hand_left.png");this.add(d);const p=e.add.sprite(15,25,"comfy-spritesheet","mouth_00.png");this.add(p);const m=e.add.sprite(12,-1,"comfy-spritesheet","noice.png");this.add(m);const u=e.add.sprite(-13,-28,"comfy-spritesheet","eyesbrown_left.png");this.add(u);const g=e.add.sprite(45,-25,"comfy-spritesheet","eyesbrown_right.png");this.add(g);const f=e.add.sprite(-12,12,"comfy-spritesheet","mustache_left.png");this.add(f);const b=e.add.sprite(44,13,"comfy-spritesheet","mustache_right.png");this.add(b),this.eyeLeft=n,this.eyeRight=o,this.mouth=p,setInterval((()=>{this.blink(1)}),3e3)}talk(e){this.mouth.play({key:"talk-animation",repeat:e})}blink(e){this.visible&&(this.eyeLeft&&this.eyeLeft.play({key:"eyeleft-animation",repeat:e}),this.eyeRight&&this.eyeRight.play({key:"eyeright-animation",repeat:e}))}}class j extends p().GameObjects.Sprite{constructor(e,t,s,i,a){super(e,null!=t?t:0,null!=s?s:0,i||"comfy-spritesheet",null!=a?a:"burn_00.png"),this.setOrigin(.5,0)}}class G extends p().GameObjects.Image{constructor(e,t,s,i,a){super(e,null!=t?t:0,null!=s?s:0,i||"comfy-spritesheet",null!=a?a:"flour_spot.png"),this.setOrigin(.5,0)}}class X extends p().GameObjects.Image{constructor(e,t,s,i,a){super(e,null!=t?t:0,null!=s?s:0,i||"comfy-spritesheet",null!=a?a:"ribbon_spot.png"),this.setOrigin(.5,0)}}class V extends p().GameObjects.Sprite{constructor(e,t,s,i,a){super(e,null!=t?t:0,null!=s?s:0,i||"comfy-spritesheet",null!=a?a:"cream_spot_00.png"),this.setOrigin(.5,0)}}class q extends p().GameObjects.Image{constructor(e,t,s,i,a){super(e,null!=t?t:0,null!=s?s:0,i||"comfy-spritesheet",null!=a?a:"icon_spot.png"),this.setOrigin(.5,0)}}class K extends p().GameObjects.Image{constructor(e,t,s,i,a){super(e,null!=t?t:0,null!=s?s:1,i||"comfy-spritesheet",null!=a?a:"frame_spot.png"),this.setOrigin(.5,0)}}class Q extends E{constructor(e){super(e),this.gameObject=e,e.__PushOnClick=this}static getComponent(e){return e.__PushOnClick}awake(){this.gameObject.setInteractive().on("pointerdown",(()=>{this.scene.add.tween({targets:this.gameObject,scaleX:"*=0.8",scaleY:"*=0.8",duration:80,yoyo:!0})}))}}class z extends p().Scene{constructor(){super("PlayScene"),this.startPut=!1,this.cakes=[],this.failedCakeNum=0,this.prevStepNum=0}editorCreate(){const e=this.add.image(0,0,"canvasIcon");e.visible=!1,this.add.image(400,248,"bg");const t=new C(this,0,19);this.add.existing(t);const s=this.add.image(278,433,"comfy-spritesheet","oval_blur.png");s.visible=!1;const i=this.add.image(203,433,"comfy-spritesheet","left_normal.png"),a=this.add.image(278,433,"comfy-spritesheet","right_normal.png"),r=new D(this,698,30);this.add.existing(r);const n=new N(this,7,339);this.add.existing(n);const o=new H(this,17,304);this.add.existing(o);const h=this.add.image(89,333,"comfy-spritesheet","cirle_frame_normal.png");h.setOrigin(0,0);const l=this.add.image(89,370,"comfy-spritesheet","square_frame_normal.png");l.setOrigin(0,0);const c=this.add.image(89,296,"comfy-spritesheet","heart_frame_normal.png");c.setOrigin(0,0);const d=new F(this,0,220);this.add.existing(d);const p=this.add.image(188,297,"comfy-spritesheet","brown_bin_normal.png");p.setOrigin(0,0);const m=this.add.image(188,334,"comfy-spritesheet","pink_bin_normal.png");m.setOrigin(0,0);const u=new L(this,677,222);this.add.existing(u),u.visible=!1;const g=new Y(this,726,164);this.add.existing(g);const f=this.add.image(188,371,"comfy-spritesheet","yellow_bin_normal.png");f.setOrigin(0,0);const b=this.add.image(290.6666666666667,297,"comfy-spritesheet","red_ribbon_normal.png");b.setOrigin(0,0);const y=this.add.image(290.6666666666667,371,"comfy-spritesheet","green_ribbon_normal.png");y.setOrigin(0,0);const E=this.add.image(290.6666666666667,334,"comfy-spritesheet","white_ribbon_noraml.png");E.setOrigin(0,0);const _=this.add.image(388,297,"comfy-spritesheet","brown_cream_normal.png");_.setOrigin(0,0);const S=this.add.image(388,334,"comfy-spritesheet","pink_frame_normal.png");S.setOrigin(0,0);const v=this.add.image(388,371,"comfy-spritesheet","yellow_cream_normal.png");v.setOrigin(0,0);const O=this.add.image(499,340,"comfy-spritesheet","three_icons_normal.png"),R=this.add.image(536,340,"comfy-spritesheet","heart_icon_normal.png"),k=this.add.image(538,375,"comfy-spritesheet","emoticon_normal.png"),T=this.add.image(500,375,"comfy-spritesheet","leaf_normal.png"),A=this.add.image(613,326,"comfy-spritesheet","burn_normal.png"),x=this.add.image(614,380,"comfy-spritesheet","spice_normal.png"),I=this.add.sprite(729,215,"comfy-spritesheet","box_moving_00.png");I.visible=!1;const W=this.add.sprite(737,138,"comfy-spritesheet","hand_in_15.png");W.visible=!1;const z=new B(this,0,0);this.add.existing(z);const J=new U(this,685,6);this.add.existing(J);const Z=new M(this,1086,378);this.add.existing(Z);const $=this.add.image(516,349,"comfy-spritesheet","rectangle_blur.png");$.visible=!1;const ee=this.add.image(63,85,"comfy-spritesheet","square_blur.png");ee.visible=!1;const te=new j(this,624,0);this.add.existing(te);const se=new G(this,224,0);this.add.existing(se);const ie=new X(this,324,0);this.add.existing(ie);const ae=new V(this,424,0);this.add.existing(ae);const re=new q(this,524,0);this.add.existing(re);const ne=new K(this,124,0);this.add.existing(ne),ne.visible=!0;const oe=this.add.text(377,153,"",{});oe.setOrigin(.5,.5),oe.visible=!1,oe.text="You won",oe.setStyle({color:"#ff2d2dff",fontSize:"72px",fontStyle:"bold"});const he=this.add.text(377,236,"",{});he.setOrigin(.5,.5),he.visible=!1,he.text="Main menu\n",he.setStyle({color:"#ff2d2dff",fontSize:"35px",fontStyle:"bold"});const le=this.add.text(377,268,"",{});le.setOrigin(.5,.5),le.visible=!1,le.text="Replay",le.setStyle({color:"#ff2d2dff",fontSize:"35px",fontStyle:"bold"}),new w(e);const ce=new P(i);ce.normFrame={key:"comfy-spritesheet",frame:"left_normal.png"},ce.overFrame={key:"comfy-spritesheet",frame:"left_over.png"},ce.downFrame={key:"comfy-spritesheet",frame:"left_down.png"},ce.callback=this.playPrev,ce.context=this;const de=new P(a);de.normFrame={key:"comfy-spritesheet",frame:"right_normal.png"},de.overFrame={key:"comfy-spritesheet",frame:"right_over.png"},de.downFrame={key:"comfy-spritesheet",frame:"right_down.png"},de.callback=this.playNext,de.context=this;const pe=new P(h);pe.normFrame={key:"comfy-spritesheet",frame:"cirle_frame_normal.png"},pe.overFrame={key:"comfy-spritesheet",frame:"cirle_frame_up.png"},pe.downFrame={key:"comfy-spritesheet",frame:"cirle_frame_down.png"},pe.callback=this.circle,pe.context=this;const me=new P(l);me.normFrame={key:"comfy-spritesheet",frame:"square_frame_normal.png"},me.overFrame={key:"comfy-spritesheet",frame:"square_frame_up.png"},me.downFrame={key:"comfy-spritesheet",frame:"square_frame_down.png"},me.callback=this.square,me.context=this;const ue=new P(c);ue.normFrame={key:"comfy-spritesheet",frame:"heart_frame_normal.png"},ue.overFrame={key:"comfy-spritesheet",frame:"heart_frame_up.png"},ue.downFrame={key:"comfy-spritesheet",frame:"heart_frame_down.png"},ue.callback=this.heart,ue.context=this;const ge=new P(p);ge.normFrame={key:"comfy-spritesheet",frame:"brown_bin_normal.png"},ge.overFrame={key:"comfy-spritesheet",frame:"brown_bin_up.png"},ge.downFrame={key:"comfy-spritesheet",frame:"brown_bin_down.png"},ge.callback=this.doBrownFlour,ge.context=this;const fe=new P(m);fe.normFrame={key:"comfy-spritesheet",frame:"pink_bin_normal.png"},fe.overFrame={key:"comfy-spritesheet",frame:"pink_bin_up.png"},fe.downFrame={key:"comfy-spritesheet",frame:"pink_bin_down.png"},fe.callback=this.doPinkFlour,fe.context=this;const be=new P(f);be.normFrame={key:"comfy-spritesheet",frame:"yellow_bin_normal.png"},be.overFrame={key:"comfy-spritesheet",frame:"yellow_bin_up.png"},be.downFrame={key:"comfy-spritesheet",frame:"yellow_bin_down.png"},be.callback=this.doYellowFlour,be.context=this;const ye=new P(b);ye.normFrame={key:"comfy-spritesheet",frame:"red_ribbon_normal.png"},ye.overFrame={key:"comfy-spritesheet",frame:"red_ribbon_up.png"},ye.downFrame={key:"comfy-spritesheet",frame:"red_ribbon_down.png"},ye.callback=this.doRedRibbon,ye.context=this;const Ee=new P(y);Ee.normFrame={key:"comfy-spritesheet",frame:"green_ribbon_normal.png"},Ee.overFrame={key:"comfy-spritesheet",frame:"green_ribbon_over.png"},Ee.downFrame={key:"comfy-spritesheet",frame:"green_ribbon_down.png"},Ee.callback=this.doGreenRibbon,Ee.context=this;const _e=new P(E);_e.normFrame={key:"comfy-spritesheet",frame:"white_ribbon_noraml.png"},_e.overFrame={key:"comfy-spritesheet",frame:"white_ribbon_up.png"},_e.downFrame={key:"comfy-spritesheet",frame:"white_ribbon_down.png"},_e.callback=this.doWhiteRibbon,_e.context=this;const Se=new P(_);Se.normFrame={key:"comfy-spritesheet",frame:"brown_cream_normal.png"},Se.overFrame={key:"comfy-spritesheet",frame:"brown_cream_up.png"},Se.downFrame={key:"comfy-spritesheet",frame:"brown_cream_down.png"},Se.callback=this.doBrownCream,Se.context=this;const ve=new P(S);ve.normFrame={key:"comfy-spritesheet",frame:"pink_frame_normal.png"},ve.overFrame={key:"comfy-spritesheet",frame:"pink_frame_up.png"},ve.downFrame={key:"comfy-spritesheet",frame:"pink_frame_down.png"},ve.callback=this.doPinkCream,ve.context=this;const we=new P(v);we.normFrame={key:"comfy-spritesheet",frame:"yellow_cream_normal.png"},we.overFrame={key:"comfy-spritesheet",frame:"yellow_cream_up.png"},we.downFrame={key:"comfy-spritesheet",frame:"yellow_cream_down.png"},we.callback=this.doYellowCream,we.context=this;const Ce=new P(O);Ce.normFrame={key:"comfy-spritesheet",frame:"three_icons_normal.png"},Ce.overFrame={key:"comfy-spritesheet",frame:"three_icons_up.png"},Ce.downFrame={key:"comfy-spritesheet",frame:"three_icons_down.png"},Ce.callback=this.doButtonsIcon,Ce.context=this;const Oe=new P(R);Oe.normFrame={key:"comfy-spritesheet",frame:"heart_icon_normal.png"},Oe.overFrame={key:"comfy-spritesheet",frame:"heart_icon_up.png"},Oe.downFrame={key:"comfy-spritesheet",frame:"heart_icon_down.png"},Oe.callback=this.doHeartIcon,Oe.context=this;const Re=new P(k);Re.normFrame={key:"comfy-spritesheet",frame:"emoticon_normal.png"},Re.overFrame={key:"comfy-spritesheet",frame:"emoticon_up.png"},Re.downFrame={key:"comfy-spritesheet",frame:"emoticon_down.png"},Re.callback=this.doEmoticon,Re.context=this;const ke=new P(T);ke.normFrame={key:"comfy-spritesheet",frame:"leaf_normal.png"},ke.overFrame={key:"comfy-spritesheet",frame:"leaf_up.png"},ke.downFrame={key:"comfy-spritesheet",frame:"leaf_down.png"},ke.callback=this.doLeafIcon,ke.context=this;const Te=new P(A);Te.normFrame={key:"comfy-spritesheet",frame:"burn_normal.png"},Te.overFrame={key:"comfy-spritesheet",frame:"burn_up.png"},Te.downFrame={key:"comfy-spritesheet",frame:"burn_down.png"},Te.callback=this.doBurn,Te.context=this;const Ae=new P(x);Ae.normFrame={key:"comfy-spritesheet",frame:"spice_normal.png"},Ae.overFrame={key:"comfy-spritesheet",frame:"spice_up.png"},Ae.downFrame={key:"comfy-spritesheet",frame:"spice_down.png"},Ae.callback=this.doSpice,Ae.context=this,new Q(he),new Q(le),this.leftCarousel=t,this.buttonHightlight=s,this.leftBtn=i,this.rightBtn=a,this.rightCarousel=r,this.timer=n,this.alarmLight=o,this.circleFrame=h,this.squareFrame=l,this.heartFrame=c,this.centerLeftCarousel=d,this.brownFlour=p,this.pinkFlour=m,this.trash=g,this.yellowFlour=f,this.redRibbon=b,this.greenRibbon=y,this.whiteRibbon=E,this.brownCream=_,this.pinkCream=S,this.yellowCream=v,this.buttonsIcon=O,this.heartIcon=R,this.emoticon=k,this.leafIcon=T,this.burn=A,this.spice=x,this.box=I,this.hand=W,this.targetScreen=z,this.resultScreen=J,this.character=Z,this.controlHightlight=$,this.targetHightlight=ee,this.tasteSpot=te,this.flourSpot=se,this.ribbonSpot=ie,this.creamSpot=ae,this.decorateSpot=re,this.frameSpot=ne,this.resultText=oe,this.mainMenu=he,this.replay=le,this.events.emit("scene-awake")}create(){this.editorCreate(),g.setCurrentScene(this),this.cakeNum=0,this.cakes=[],this.resultText.visible=!1,this.mainMenu.visible=!1,this.replay.visible=!1,this.failedCakeNum=0,this.createControl(),this.createInitCake(),this.charX=this.character.x,this.showChar(),this.mainMenu.on("pointerdown",(()=>{g.enterMenuScene()})),this.replay.on("pointerdown",(()=>{g.enterPlayScene()}))}showChar(){this.add.tween({targets:this.character,x:700,duration:200,ease:p().Math.Easing.Elastic.InOut,onComplete:()=>{this.character.talk(5),this.character.blink(3),this.hideChar()}})}hideChar(){this.add.tween({targets:this.character,x:this.charX,duration:200,ease:p().Math.Easing.Elastic.InOut,delay:2e3})}playPrev(){if(!this.resultText.visible){if(1==this.cakes.length&&this.getCakeByPos(this.frameSpot)&&!this.isExistMakingCake())return this.hightlight(this.targetHightlight),this.controlHightlight.x=this.frameSpot.x-12,void this.hightlight(this.controlHightlight);for(let e=this.cakes.length-1;e>=0;e--)this.movePrev(this.cakes[e],e);u.level!=c.INTERMEDIATE&&u.level!=c.ADVANCED||(this.prevStepNum++,3==this.prevStepNum&&(this.canMove(84,121)&&this.addCake(),this.prevStepNum=0),this.timer.reset())}}moveNext(e){e.y<247?(this.add.tween({targets:e,x:"-=30",y:"+=63",duration:200}),this.leftCarousel.play("left-animation",!0),this.centerLeftCarousel.playNext()):(this.add.tween({targets:e,x:"+=100",duration:200}),this.leftCarousel.play("left-animation",!0),this.centerLeftCarousel.playNext())}movePrev(e,t){if(e.x>24){if(e.y>=247&&this.canMove(e.x-100,e.y)&&t>=0)for(let e=t;e>=0;e--)this.add.tween({targets:this.cakes[e],x:"-=100",duration:200});this.leftCarousel.playReverse("left-animation",!0),this.centerLeftCarousel.playPrev()}else if(24==e.x){if(e.y>148&&this.canMove(e.x+30,e.y-63)){this.add.tween({targets:e,x:"+=30",y:"-=63",duration:200});for(let e=t-1;e>=0;e--)this.add.tween({targets:this.cakes[e],x:"-=100",duration:200})}this.leftCarousel.playReverse("left-animation",!0),this.centerLeftCarousel.playPrev()}}playNext(){if(!this.resultText.visible){if(1==this.cakes.length&&this.getCakeByPos(this.frameSpot)&&!this.isExistMakingCake())return this.hightlight(this.targetHightlight),this.controlHightlight.x=this.frameSpot.x-12,void this.hightlight(this.controlHightlight);for(let e=0;e<this.cakes.length;e++)this.cakes[e].x>this.decorateSpot.x?(u.level!=c.INTERMEDIATE&&u.level!=c.ADVANCED||this.canMove(84,121)&&this.addCake(),this.checkResult(this.cakes[e])?(this.resultScreen.setStatusAt(this.cakeNum,!0),this.add.tween({targets:this.cakes[e],x:"+=110",duration:200,onComplete:()=>{this.hand.visible=!0,this.hand.play("hand-in-animation"),setTimeout((()=>{this.cakes[e].destroy(),this.cakes.splice(e,1)}),500),this.hand.on("animationcomplete",(()=>{if(this.rightCarousel.play("right-animation"),u.level==c.EASY){let e=this.createNewCake();e.visible=!1,this.box.visible=!0,this.hand.off("animationcomplete"),this.add.tween({targets:this.box,x:"+=150",y:"-=250",duration:3e3,onComplete:()=>{this.box.visible=!1,this.box.x=this.initX,this.box.y=this.initY,e.visible=!0,this.add.tween({targets:e,x:24,y:247,duration:200,onComplete:()=>{this.centerLeftCarousel.playNext(),this.add.tween({targets:e,x:"+=200",duration:800,onComplete:()=>{if(u.level==c.EASY){if(4==this.cakeNum)return this.resultScreen.tran.visible=!0,this.resultScreen.tran.play("tran-animation"),this.resultText.setText("You won"),this.resultText.visible=!0,this.mainMenu.visible=!0,this.replay.visible=!0,window.parent.postMessage(u.level,"*"),void(this.cakeNum=0)}else if((u.level==c.ADVANCED||u.level==c.INTERMEDIATE)&&5==this.cakeNum)return this.resultText.setText("You won"),this.resultText.visible=!0,this.mainMenu.visible=!0,this.replay.visible=!0,window.parent.postMessage(u.level,"*"),void(this.cakeNum=0);this.cakeNum++}})}})}})}}))}})):(this.failedCakeNum++,this.failedCakeNum>=3&&(this.resultText.setText("You failed"),this.resultText.visible=!0,this.replay.visible=!0,this.mainMenu.visible=!0,this.failedCakeNum=0,this.timer.visible&&this.timer.stop()),this.alarmLight.play("alarm-animation"),this.resultScreen.setStatusAt(this.cakeNum,!1),this.add.tween({targets:this.cakes[e],x:"+=110",duration:200,onComplete:()=>{this.centerLeftCarousel.openDesk(),this.trash.play("open-animation"),this.add.tween({targets:this.cakes[e],y:"+=100",duration:200,onComplete:()=>{if(this.cakes[e].destroy(),this.cakes.splice(e,1),u.level==c.EASY){let e=this.createNewCake();e.visible=!0,this.add.tween({targets:e,x:24,y:247,duration:200,onComplete:()=>{this.centerLeftCarousel.playNext(),this.add.tween({targets:e,x:"+=200",duration:800,onComplete:()=>{}})}})}}})}}))):this.moveNext(this.cakes[e]);u.level!=c.INTERMEDIATE&&u.level!=c.ADVANCED||this.timer.reset()}}checkResult(e){let t=!1;return t=e.features.length==this.model.features.length&&e.features.every(((e,t)=>e===this.model.features[t])),t}createControl(){switch(u.level){case c.EASY:this.frameSpot.x=this.flourSpot.x,this.heartFrame.x=this.brownFlour.x,this.circleFrame.x=this.pinkFlour.x,this.squareFrame.x=this.yellowFlour.x,this.flourSpot.x=this.ribbonSpot.x,this.brownFlour.x=this.redRibbon.x,this.pinkFlour.x=this.whiteRibbon.x,this.yellowFlour.x=this.greenRibbon.x,this.hideRibbonControl(),this.hideTasteControl(),this.hideTimerControl(),this.resultScreen.cakeNum(5);break;case c.INTERMEDIATE:this.hideTasteControl(),this.resultScreen.cakeNum(5);break;case c.ADVANCED:this.resultScreen.cakeNum(6)}this.flourSpot.setDepth(2),this.creamSpot.setDepth(2),this.frameSpot.setDepth(2),this.targetHightlight.setDepth(2)}initCake(){let e=new b(this,this.frameSpot.x,this.frameSpot.y);return e.x=this.frameSpot.x,e.y=247,this.cakes.push(e),e}addCake(){let e=new b(this,this.frameSpot.x,this.frameSpot.y);return e.x=84,e.y=121,this.cakes.push(e),e}createInitCake(){let e=this.initCake();return this.model=new f(u.level),this.targetScreen.clearChild(),this.targetScreen.createImage(this.model),this.targetScreen.setDepth(1),e.setDepth(this.targetScreen.depth-1),this.initX=this.box.x,this.initY=this.box.y,e}createNewCake(){let e=this.addCake();return this.model=new f(u.level),this.targetScreen.clearChild(),this.targetScreen.createImage(this.model),this.targetScreen.setDepth(1),e.setDepth(this.targetScreen.depth-1),this.initX=this.box.x,this.initY=this.box.y,e}showTimerControl(){this.alarmLight.visible=!0,this.timer.visible=!0}hideTimerControl(){this.alarmLight.visible=!1,this.timer.visible=!1}showFrameControl(){this.frameSpot.visible=!0,this.heartFrame.visible=!0,this.circleFrame.visible=!0,this.squareFrame.visible=!0}hideFrameControl(){this.frameSpot.visible=!1,this.heartFrame.visible=!1,this.circleFrame.visible=!1,this.squareFrame.visible=!1}showFlourControl(){this.flourSpot.visible=!0,this.brownFlour.visible=!0,this.pinkFlour.visible=!0,this.yellowFlour.visible=!0}hideFlourControl(){this.flourSpot.visible=!1,this.brownFlour.visible=!1,this.pinkFlour.visible=!1,this.yellowFlour.visible=!1}showRibbonControl(){this.ribbonSpot.visible=!0,this.redRibbon.visible=!0,this.whiteRibbon.visible=!0,this.greenRibbon.visible=!0}hideRibbonControl(){this.ribbonSpot.visible=!1,this.redRibbon.visible=!1,this.whiteRibbon.visible=!1,this.greenRibbon.visible=!1}showCreamControl(){this.creamSpot.visible=!0,this.brownCream.visible=!0,this.pinkCream.visible=!0,this.yellowCream.visible=!0}hideCreamControl(){this.creamSpot.visible=!1,this.brownCream.visible=!1,this.pinkCream.visible=!1,this.yellowCream.visible=!1}showDecorateControl(){this.decorateSpot.visible=!0,this.buttonsIcon.visible=!0,this.leafIcon.visible=!0,this.heartIcon.visible=!0,this.emoticon.visible=!0}hideDecorateControl(){this.decorateSpot.visible=!1,this.buttonsIcon.visible=!1,this.leafIcon.visible=!1,this.heartIcon.visible=!1,this.emoticon.visible=!1}showTasteControl(){this.tasteSpot.visible=!0,this.burn.visible=!0,this.spice.visible=!0}hideTasteControl(){this.tasteSpot.visible=!1,this.burn.visible=!1,this.spice.visible=!1}circle(){if(this.resultText.visible)return;let e,t,s=this.getCakeByPos(this.frameSpot);if(!s)return this.shake(this.frameSpot),void this.hightlight(this.buttonHightlight);if(u.level==c.EASY){let i=this.getEnd(s.features);t=y.calPaddingY(s.features),i==o.CIRCLE||i==o.HEART||i==o.SQUARE?(e=s.last,this.add.tween({targets:e,y:-this.frameSpot.y-this.frameSpot.displayHeight,scaleX:.3,scaleY:.3,duration:200,onComplete:()=>{s.remove(e),e.removedFromScene(),e.destroy(),e=null,s.features.pop(),e=this.add.sprite(this.frameSpot.x,this.frameSpot.y+this.frameSpot.displayHeight,"comfy-spritesheet","circle_00.png"),e.scaleX=e.scaleY=.3,this.add.tween({targets:e,y:s.y-10+t,scaleX:.9,scaleY:.9,duration:200,onComplete:()=>{e.play("circle-frame-animation",!0),e.on("animationcomplete",(()=>{s.add(e),e.x=0,e.y=-10+t,s.tableCloth.setDepth(0),this.getStart(this.model.features)!=o.CIRCLE&&this.hightlight(this.targetHightlight)})),s.features.push(o.CIRCLE)},callbackScope:this})}})):(e=this.add.sprite(this.frameSpot.x,this.frameSpot.y+this.frameSpot.displayHeight,"comfy-spritesheet","circle_00.png"),e.scaleX=e.scaleY=.3,this.add.tween({targets:e,y:s.y-10+t,scaleX:.9,scaleY:.9,duration:200,onComplete:()=>{e.play("circle-frame-animation",!0),e.on("animationcomplete",(()=>{s.add(e),e.x=0,e.y=-10+t,s.tableCloth.setDepth(0),this.getStart(this.model.features)!=o.CIRCLE&&this.hightlight(this.targetHightlight)})),s.features.push(o.CIRCLE)},callbackScope:this}))}else!(this.isExistMakingCake||this.cakes.length>1)||u.level!=c.INTERMEDIATE&&u.level!=c.ADVANCED||(this.timer.start(),this.timer.on("reset",this.playNext,this)),t=y.calPaddingY(s.features),e=this.add.sprite(this.frameSpot.x,this.frameSpot.y+this.frameSpot.displayHeight,"comfy-spritesheet","circle_00.png").setOrigin(.5),e.scaleX=e.scaleY=.3,this.timer.visible&&this.timer.pause(),this.add.tween({targets:e,y:s.y-10+t,scaleX:.9,scaleY:.9,duration:200,onComplete:()=>{e.play("circle-frame-animation",!0),e.on("animationcomplete",(()=>{this.timer.visible&&this.timer.resume(),s.add(e),e.x=0,e.y=-10+t,s.tableCloth.setDepth(0),this.getStart(this.model.features)!=o.CIRCLE&&this.hightlight(this.targetHightlight)})),s.features.push(o.CIRCLE)},callbackScope:this})}square(){if(this.resultText.visible)return;let e,t,s=this.getCakeByPos(this.frameSpot);if(!s)return this.shake(this.frameSpot),void this.hightlight(this.buttonHightlight);if(u.level==c.EASY){let i=this.getEnd(s.features);t=y.calPaddingY(s.features),i==o.CIRCLE||i==o.HEART||i==o.SQUARE?(e=s.last,this.add.tween({targets:e,y:-this.frameSpot.y-this.frameSpot.displayHeight,scaleX:.3,scaleY:.3,duration:200,onComplete:()=>{s.remove(e),e.removedFromScene(),e.destroy(),e=null,s.features.pop(),e=this.add.sprite(this.frameSpot.x,this.frameSpot.y+this.frameSpot.displayHeight,"comfy-spritesheet","square_00.png"),e.scaleX=e.scaleY=.3,this.add.tween({targets:e,y:s.y-10+t,scaleX:1,scaleY:1,duration:200,onComplete:()=>{e.play("square-frame-animation",!0),e.on("animationcomplete",(()=>{s.add(e),e.x=0,e.y=-10+t,s.tableCloth.setDepth(0),this.getStart(this.model.features)!=o.SQUARE&&this.hightlight(this.targetHightlight)})),s.features.push(o.SQUARE)},callbackScope:this})}})):(e=this.add.sprite(this.frameSpot.x,this.frameSpot.y+this.frameSpot.displayHeight,"comfy-spritesheet","square_00.png"),e.scaleX=e.scaleY=.3,this.add.tween({targets:e,y:s.y-10+t,scaleX:1,scaleY:1,duration:200,onComplete:()=>{e.play("square-frame-animation",!0),e.on("animationcomplete",(()=>{s.add(e),e.x=0,e.y=-10+t,s.tableCloth.setDepth(0),this.getStart(s.features)!=o.SQUARE&&this.hightlight(this.targetHightlight)})),s.features.push(o.SQUARE)},callbackScope:this}))}else{!(this.isExistMakingCake||this.cakes.length>1)||u.level!=c.INTERMEDIATE&&u.level!=c.ADVANCED||(this.timer.start(),this.timer.on("reset",this.playNext,this)),t=y.calPaddingY(s.features);let e=this.add.sprite(this.frameSpot.x,this.frameSpot.y+this.frameSpot.displayHeight,"comfy-spritesheet","square_00.png").setOrigin(.5);e.scaleX=e.scaleY=.3,this.timer.visible&&this.timer.pause(),this.add.tween({targets:e,y:s.y-10+t,scaleX:.9,scaleY:.9,duration:200,onComplete:()=>{e.play("square-frame-animation",!0),e.on("animationcomplete",(()=>{this.timer.visible&&this.timer.resume(),s.add(e),e.x=0,e.y=-10+t,s.tableCloth.setDepth(0),this.getStart(s.features)!=o.SQUARE&&this.hightlight(this.targetHightlight)})),s.features.push(o.SQUARE)},callbackScope:this})}}heart(){if(this.resultText.visible)return;let e,t,s=this.getCakeByPos(this.frameSpot);if(!s)return this.shake(this.frameSpot),void this.hightlight(this.buttonHightlight);if(u.level==c.EASY){let i=this.getEnd(s.features);t=y.calPaddingY(s.features),i==o.CIRCLE||i==o.HEART||i==o.SQUARE?(e=s.last,this.add.tween({targets:e,y:-this.frameSpot.y-this.frameSpot.displayHeight,scaleX:.4,scaleY:.4,duration:200,onComplete:()=>{s.remove(e),e.removedFromScene(),e.destroy(),e=null,s.features.pop(),e=this.add.sprite(this.frameSpot.x,this.frameSpot.y+this.frameSpot.displayHeight,"comfy-spritesheet","heart_00.png"),e.scaleX=e.scaleY=.4,this.add.tween({targets:e,y:s.y-10+t,scaleX:.9,scaleY:.9,duration:200,onComplete:()=>{e.play("heart-frame-animation",!0),e.on("animationcomplete",(()=>{s.add(e),e.x=0,e.y=-10+t,s.tableCloth.setDepth(0),this.getStart(this.model.features)!=o.HEART&&this.hightlight(this.targetHightlight)})),s.features.push(o.HEART)},callbackScope:this})}})):(e=this.add.sprite(this.frameSpot.x,this.frameSpot.y+this.frameSpot.displayHeight,"comfy-spritesheet","heart_00.png"),e.scaleX=e.scaleY=.4,this.add.tween({targets:e,y:s.y-10+t,scaleX:.9,scaleY:.9,duration:200,onComplete:()=>{e.play("heart-frame-animation",!0),e.on("animationcomplete",(()=>{s.add(e),e.x=0,e.y=-10+t,s.tableCloth.setDepth(0),this.getStart(this.model.features)!=o.HEART&&this.hightlight(this.targetHightlight)})),s.features.push(o.HEART)},callbackScope:this}))}else!(this.isExistMakingCake||this.cakes.length>1)||u.level!=c.INTERMEDIATE&&u.level!=c.ADVANCED||(this.timer.start(),this.timer.on("reset",this.playNext,this)),t=y.calPaddingY(s.features),e=this.add.sprite(this.frameSpot.x,this.frameSpot.y+this.frameSpot.displayHeight,"comfy-spritesheet","heart_00.png").setOrigin(.5),e.scaleX=e.scaleY=.3,this.timer.visible&&this.timer.pause(),this.add.tween({targets:e,y:s.y-10+t,scaleX:.9,scaleY:.9,duration:200,onComplete:()=>{e.play("heart-frame-animation",!0),e.on("animationcomplete",(()=>{this.timer.visible&&this.timer.resume(),s.add(e),e.x=0,e.y=-10+t,s.tableCloth.setDepth(0),this.getStart(this.model.features)!=o.HEART&&this.hightlight(this.targetHightlight)})),s.features.push(o.HEART)},callbackScope:this})}doBrownFlour(){if(this.resultText.visible)return;let e=this.getCakeByPos(this.flourSpot);if(!e)return this.shake(this.flourSpot),void this.hightlight(this.buttonHightlight);this.timer.visible&&this.timer.pause();let t=this.getEnd(e.features),s=y.calPaddingY(e.features);if(t==o.CIRCLE||t==o.HEART||t==o.SQUARE){let a=this.add.sprite(this.flourSpot.x,this.flourSpot.y+this.flourSpot.displayHeight+s,"comfy-spritesheet","brown_flour_00.png").setOrigin(.5,0);a.setDepth(this.flourSpot.depth-1),a.play("brown-flour-animation",!0),a.on("animationcomplete",(()=>{a.removedFromScene(),a.destroy(),a.off("animationcomplete")}));let r=e.last,n=r.x,h=r.y;switch(t){case o.CIRCLE:r.play("brown-circle-animation",!0);break;case o.HEART:r.play("brown-heart-animation",!0);break;case o.SQUARE:r.play("brown-square-animation",!0)}r.on("animationcomplete",(()=>{r.x=n,r.y=h,e.features.push(i.BROWN),r.off("animationcomplete"),this.timer.visible&&this.timer.resume()}))}else{if(t!=i.BROWN&&t!=i.PINK&&t!=i.YELLOW)return;{let a=this.getStart(e.features),r=e.last,n=this.add.sprite(this.flourSpot.x,this.flourSpot.y+this.flourSpot.displayHeight+s,"comfy-spritesheet","brown_flour_00.png").setOrigin(.5,0);switch(n.setDepth(this.flourSpot.depth-1),t){case i.BROWN:n.playReverse("brown-flour-animation",!0);break;case i.PINK:n.playReverse("pink-flour-animation",!0);break;case i.YELLOW:n.playReverse("yellow-flour-animation",!0)}switch(a){case o.CIRCLE:r.setFrame("circle_00.png");break;case o.HEART:r.setFrame("heart_00.png");break;case o.SQUARE:r.setFrame("square_00.png")}e.features.pop(),n.on("animationcomplete",(()=>{n.removedFromScene(),n.destroy(),n.off("animationcomplete");let t=this.add.sprite(this.flourSpot.x,this.flourSpot.y+this.flourSpot.displayHeight+s,"comfy-spritesheet","brown_flour_00.png").setOrigin(.5,0);switch(t.setDepth(this.flourSpot.depth-1),t.play("brown-flour-animation",!0),t.on("animationcomplete",(()=>{t.removedFromScene(),t.destroy(),t.off("animationcomplete"),this.timer.visible&&this.timer.resume()})),a){case o.CIRCLE:r.play("brown-circle-animation",!0);break;case o.HEART:r.play("brown-heart-animation",!0);break;case o.SQUARE:r.play("brown-square-animation",!0)}e.features.push(i.BROWN)}))}}}doPinkFlour(){if(this.resultText.visible)return;let e=this.getCakeByPos(this.flourSpot);if(!e)return this.shake(this.flourSpot),void this.hightlight(this.buttonHightlight);this.timer.visible&&this.timer.pause();let t=this.getEnd(e.features),s=y.calPaddingY(e.features);if(t==o.CIRCLE||t==o.HEART||t==o.SQUARE){let a=this.add.sprite(this.flourSpot.x,this.flourSpot.y+this.flourSpot.displayHeight+s,"comfy-spritesheet","pink_flour_00.png").setOrigin(.5,0);a.setDepth(this.flourSpot.depth-1),a.play("pink-flour-animation",!0),a.on("animationcomplete",(()=>{a.removedFromScene(),a.destroy(),a.off("animationcomplete"),this.timer.visible&&this.timer.resume()}));let r=e.last,n=r.x,h=r.y;switch(t){case o.CIRCLE:r.play("pink-circle-animation",!0);break;case o.HEART:r.play("pink-heart-animation",!0);break;case o.SQUARE:r.play("pink-square-animation",!0)}r.on("animationcomplete",(()=>{r.x=n,r.y=h,e.features.push(i.PINK),r.off("animationcomplete")}))}else{if(t!=i.BROWN&&t!=i.PINK&&t!=i.YELLOW)return;{let a=this.getStart(e.features),r=e.last,n=this.add.sprite(this.flourSpot.x,this.flourSpot.y+this.flourSpot.displayHeight+s,"comfy-spritesheet","pink_flour_00.png").setOrigin(.5,0);switch(n.setDepth(this.flourSpot.depth-1),t){case i.BROWN:n.playReverse("brown-flour-animation",!0);break;case i.PINK:n.playReverse("pink-flour-animation",!0);break;case i.YELLOW:n.playReverse("yellow-flour-animation",!0)}switch(e.features.pop(),a){case o.CIRCLE:r.setFrame("circle_00.png");break;case o.HEART:r.setFrame("heart_00.png");break;case o.SQUARE:r.setFrame("square_00.png")}n.on("animationcomplete",(()=>{n.removedFromScene(),n.destroy(),n.off("animationcomplete");let t=this.add.sprite(this.flourSpot.x,this.flourSpot.y+this.flourSpot.displayHeight+s,"comfy-spritesheet","pink_flour_00.png").setOrigin(.5,0);switch(t.setDepth(this.flourSpot.depth-1),t.play("pink-flour-animation",!0),t.on("animationcomplete",(()=>{t.removedFromScene(),t.destroy(),t.off("animationcomplete"),this.timer.visible&&this.timer.resume()})),a){case o.CIRCLE:r.play("pink-circle-animation",!0);break;case o.HEART:r.play("pink-heart-animation",!0);break;case o.SQUARE:r.play("pink-square-animation",!0)}e.features.push(i.PINK)}))}}}doYellowFlour(){if(this.resultText.visible)return;let e=this.getCakeByPos(this.flourSpot);if(!e)return this.shake(this.flourSpot),void this.hightlight(this.buttonHightlight);this.timer.visible&&this.timer.pause();let t=this.getEnd(e.features),s=y.calPaddingY(e.features);if(t==o.CIRCLE||t==o.HEART||t==o.SQUARE){let a=this.add.sprite(this.flourSpot.x,this.flourSpot.y+this.flourSpot.displayHeight+s,"comfy-spritesheet","yellow_flour_00.png").setOrigin(.5,0);a.setDepth(this.flourSpot.depth-1),a.play("yellow-flour-animation",!0),a.on("animationcomplete",(()=>{a.removedFromScene(),a.destroy(),a.off("animationcomplete"),this.timer.visible&&this.timer.resume()}));let r=e.last,n=r.x,h=r.y;switch(t){case o.CIRCLE:r.play("yellow-circle-animation",!0);break;case o.HEART:r.play("yellow-heart-animation",!0);break;case o.SQUARE:r.play("yellow-square-animation",!0)}r.on("animationcomplete",(()=>{r.x=n,r.y=h,e.features.push(i.YELLOW),r.off("animationcomplete")}))}else{if(t!=i.BROWN&&t!=i.PINK&&t!=i.YELLOW)return;{let a=this.getStart(e.features),r=e.last,n=this.add.sprite(this.flourSpot.x,this.flourSpot.y+this.flourSpot.displayHeight+s,"comfy-spritesheet","yellow_flour_00.png").setOrigin(.5,0);switch(n.setDepth(this.flourSpot.depth-1),t){case i.BROWN:n.playReverse("brown-flour-animation",!0);break;case i.PINK:n.playReverse("pink-flour-animation",!0);break;case i.YELLOW:n.playReverse("yellow-flour-animation",!0)}switch(e.features.pop(),a){case o.CIRCLE:r.setFrame("circle_00.png");break;case o.HEART:r.setFrame("heart_00.png");break;case o.SQUARE:r.setFrame("square_00.png")}n.on("animationcomplete",(()=>{n.removedFromScene(),n.destroy(),n.off("animationcomplete");let t=this.add.sprite(this.flourSpot.x,this.flourSpot.y+this.flourSpot.displayHeight+s,"comfy-spritesheet","yellow_flour_00.png").setOrigin(.5,0);switch(t.setDepth(this.flourSpot.depth-1),t.play("yellow-flour-animation",!0),t.on("animationcomplete",(()=>{t.removedFromScene(),t.destroy(),t.off("animationcomplete"),this.timer.visible&&this.timer.resume()})),a){case o.CIRCLE:r.play("yellow-circle-animation",!0);break;case o.HEART:r.play("yellow-heart-animation",!0);break;case o.SQUARE:r.play("yellow-square-animation",!0)}e.features.push(i.YELLOW)}))}}}doBurn(){if(this.resultText.visible)return;let e=this.getCakeByPos(this.tasteSpot);if(!e)return this.shake(this.tasteSpot),void this.hightlight(this.buttonHightlight);let t=this.getEnd(e.features);if(t==a.BROWN||t==a.PINK||t==a.YELLOW||t==n.BUTTONS||t==n.EMOTICON||t==n.HEART||t==n.LEAF){let s,i,r;if(this.timer.visible&&this.timer.pause(),this.tasteSpot.play("burn-animation",!0),this.tasteSpot.on("animationcomplete",(()=>{this.tasteSpot.off("animationcomplete"),this.timer.visible&&this.timer.resume()})),t==n.BUTTONS||t==n.EMOTICON||t==n.HEART||t==n.LEAF?(s=e.getAt(e.length-2),i=this.getLast(e.features),r=this.getStart(e.features)):(s=e.last,i=this.getEnd(e.features),r=this.getStart(e.features)),i==a.BROWN)switch(r){case o.CIRCLE:s.setFrame("brown_burn_circle.png");break;case o.HEART:s.setFrame("brown_burn_heart.png");break;case o.SQUARE:s.setFrame("brown_burn_square.png")}else if(i==a.PINK)switch(r){case o.CIRCLE:s.setFrame("pink_burn_circle.png");break;case o.HEART:s.setFrame("pink_burn_heart.png");break;case o.SQUARE:s.setFrame("pink_burn_square.png")}else if(i==a.YELLOW)switch(r){case o.CIRCLE:s.setFrame("yellow_burn_circle.png");break;case o.HEART:s.setFrame("yellow_burn_heart.png");break;case o.SQUARE:s.setFrame("yellow_burn_square.png")}e.features.push(h.BURN),u.level!=c.ADVANCED&&u.level!=c.INTERMEDIATE||this.showChar()}}doSpice(){if(this.resultText.visible)return;let e=this.getCakeByPos(this.tasteSpot);if(!e)return this.shake(this.tasteSpot),void this.hightlight(this.buttonHightlight);let t=this.getEnd(e.features);if(t==a.BROWN||t==a.PINK||t==a.YELLOW||t==n.BUTTONS||t==n.EMOTICON||t==n.HEART||t==n.LEAF){let s,i,a,r;switch(this.timer.visible&&this.timer.pause(),this.tasteSpot.play("spice-animation",!0),this.tasteSpot.on("animationcomplete",(()=>{this.tasteSpot.off("animationcomplete"),this.timer.visible&&this.timer.resume()})),t==n.BUTTONS||t==n.EMOTICON||t==n.HEART||t==n.LEAF?(s=e.getAt(e.length-2),i=this.getLast(e.features),a=this.getStart(e.features)):(s=e.last,i=this.getEnd(e.features),a=this.getStart(e.features)),a){case o.CIRCLE:r=this.add.image(s.x,s.y,"comfy-spritesheet","spice_circle.png").setOrigin(.5),e.add(r),r.x=s.x,r.y=s.y-5;break;case o.HEART:r=this.add.image(s.x,s.y,"comfy-spritesheet","spice_heart.png").setOrigin(.5),e.add(r),r.x=s.x,r.y=s.y-5;break;case o.SQUARE:r=this.add.image(s.x,s.y,"comfy-spritesheet","spice_square.png").setOrigin(.5),e.add(r),r.x=s.x,r.y=s.y-5}e.features.push(h.SPICE),u.level!=c.ADVANCED&&u.level!=c.INTERMEDIATE||this.showChar()}}doRedRibbon(){if(this.resultText.visible)return;let e=this.getCakeByPos(this.ribbonSpot);if(!e)return this.shake(this.ribbonSpot),void this.hightlight(this.buttonHightlight);let t=this.getEnd(e.features);if(t!=o.CIRCLE&&t!=o.HEART&&t!=o.SQUARE){this.timer.visible&&this.timer.pause();let s=y.calPaddingY(e.features),i=this.add.sprite(this.ribbonSpot.x,this.ribbonSpot.y+this.ribbonSpot.displayHeight,"comfy-spritesheet","red_ribbon_00.png").setOrigin(.5,0);i.play("red-ribbon-animation"),i.on("animationcomplete",(()=>{let a;switch(i.off("animationcomplete"),this.timer.visible&&this.timer.resume(),i.removedFromScene(),i.destroy(),e.features[0]){case o.CIRCLE:t==r.RED||t==r.RED||t==r.GREEN?(a=e.last,a.setFrame("red_ribbon_circle.png"),e.features.pop(),e.features.push(r.RED)):(a=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","red_ribbon_circle.png"),a.scaleX=a.scaleY=.9,e.add(a),a.x=-1,a.y=s,e.features.push(r.RED));break;case o.HEART:t==r.RED||t==r.RED||t==r.GREEN?(a=e.last,a.setFrame("red_ribbon_heart.png"),e.features.pop(),e.features.push(r.RED)):(a=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","red_ribbon_heart.png"),a.scaleX=a.scaleY=.9,e.add(a),a.x=-1,a.y=s,e.features.push(r.RED));break;case o.SQUARE:t==r.RED||t==r.RED||t==r.GREEN?(a=e.last,a.setFrame("red_ribbon_square.png"),e.features.pop(),e.features.push(r.RED)):(a=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","red_ribbon_square.png"),a.scaleX=a.scaleY=.9,e.add(a),a.x=-1,a.y=s,e.features.push(r.RED))}}))}}doWhiteRibbon(){if(this.resultText.visible)return;let e=this.getCakeByPos(this.ribbonSpot);if(!e)return this.shake(this.ribbonSpot),void this.hightlight(this.buttonHightlight);let t=this.getEnd(e.features);if(t!=o.CIRCLE&&t!=o.HEART&&t!=o.SQUARE){this.timer.visible&&this.timer.pause();let s=y.calPaddingY(e.features),i=this.add.sprite(this.ribbonSpot.x,this.ribbonSpot.y+this.ribbonSpot.displayHeight,"comfy-spritesheet","white_ribbon_00.png").setOrigin(.5,0);i.play("white-ribbon-animation"),i.on("animationcomplete",(()=>{let a;switch(i.off("animationcomplete"),this.timer.visible&&this.timer.resume(),i.removedFromScene(),i.destroy(),e.features[0]){case o.CIRCLE:t==r.RED||t==r.WHITE||t==r.GREEN?(a=e.last,a.setFrame("white_ribbon_circle.png"),e.features.pop(),e.features.push(r.WHITE)):(a=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","white_ribbon_circle.png"),a.scaleX=a.scaleY=.9,e.add(a),a.x=-1,a.y=s,e.features.push(r.WHITE));break;case o.HEART:t==r.RED||t==r.WHITE||t==r.GREEN?(a=e.last,a.setFrame("white_ribbon_heart.png"),e.features.pop(),e.features.push(r.WHITE)):(a=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","white_ribbon_heart.png"),a.scaleX=a.scaleY=.9,e.add(a),a.x=-1,a.y=s,e.features.push(r.WHITE));break;case o.SQUARE:t==r.RED||t==r.WHITE||t==r.GREEN?(a=e.last,a.setFrame("white_ribbon_square.png"),e.features.pop(),e.features.push(r.WHITE)):(a=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","white_ribbon_square.png"),a.scaleX=a.scaleY=.9,e.add(a),a.x=-1,a.y=s,e.features.push(r.WHITE))}}))}}doGreenRibbon(){if(this.resultText.visible)return;let e=this.getCakeByPos(this.ribbonSpot);if(!e)return this.shake(this.ribbonSpot),void this.hightlight(this.buttonHightlight);let t=this.getEnd(e.features);if(t!=o.CIRCLE&&t!=o.HEART&&t!=o.SQUARE){this.timer.visible&&this.timer.pause();let s=y.calPaddingY(e.features),i=this.add.sprite(this.ribbonSpot.x,this.ribbonSpot.y+this.ribbonSpot.displayHeight,"comfy-spritesheet","green_ribbon_00.png").setOrigin(.5,0);i.play("green-ribbon-animation"),i.on("animationcomplete",(()=>{let a;switch(i.off("animationcomplete"),this.timer.visible&&this.timer.resume(),i.removedFromScene(),i.destroy(),e.features[0]){case o.CIRCLE:t==r.RED||t==r.WHITE||t==r.GREEN?(a=e.last,a.setFrame("green_ribbon_circle.png"),e.features.pop(),e.features.push(r.GREEN)):(a=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","green_ribbon_circle.png"),a.scaleX=a.scaleY=.9,e.add(a),a.x=-1,a.y=s,e.features.push(r.GREEN));break;case o.HEART:t==r.RED||t==r.WHITE||t==r.GREEN?(a=e.last,a.setFrame("green_ribbon_heart.png"),e.features.pop(),e.features.push(r.GREEN)):(a=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","green_ribbon_heart.png"),a.scaleX=a.scaleY=.9,e.add(a),a.x=-1,a.y=s,e.features.push(r.GREEN));break;case o.SQUARE:t==r.RED||t==r.WHITE||t==r.GREEN?(a=e.last,a.setFrame("green_ribbon_square.png"),e.features.pop(),e.features.push(r.GREEN)):(a=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","green_ribbon_square.png"),a.scaleX=a.scaleY=.9,e.add(a),a.x=-1,a.y=s,e.features.push(r.GREEN))}}))}}doBrownCream(){if(this.resultText.visible)return;let e=this.getCakeByPos(this.creamSpot);if(!e)return this.shake(this.creamSpot),void this.hightlight(this.buttonHightlight);let t=this.getEnd(e.features);if(null!=t&&t!=o.CIRCLE&&t!=o.HEART&&t!=o.SQUARE){this.timer.visible&&this.timer.pause();let s=y.calPaddingY(e.features);this.creamSpot.play("brown-spot-animation"),this.creamSpot.on("animationcomplete",(()=>{this.creamSpot.off("animationcomplete");let i,r=this.add.sprite(this.creamSpot.x,this.creamSpot.y+this.creamSpot.displayHeight+50+s,"comfy-spritesheet","brown_line_00.png").setOrigin(.5);switch(r.setDepth(this.creamSpot.depth-1),r.play("brown-cream-animation"),r.on("animationcomplete",(()=>{this.timer.visible&&this.timer.resume(),r.off("animationcomplete"),r.removedFromScene(),r.destroy()})),this.getStart(e.features)){case o.CIRCLE:t==a.BROWN||t==a.PINK||t==a.YELLOW?(i=e.last,i.setFrame("brown_cream_circle.png"),e.features.pop(),e.features.push(a.BROWN)):(i=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","brown_cream_circle.png"),i.scaleX=i.scaleY=.9,e.add(i),i.x=-1,i.y=s,e.features.push(a.BROWN));break;case o.HEART:t==a.BROWN||t==a.PINK||t==a.YELLOW?(i=e.last,i.setFrame("brown_cream_heart.png"),e.features.pop(),e.features.push(a.BROWN)):(i=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","brown_cream_heart.png"),i.scaleX=i.scaleY=.9,e.add(i),i.x=-1,i.y=s,e.features.push(a.BROWN));break;case o.SQUARE:t==a.BROWN||t==a.PINK||t==a.YELLOW?(i=e.last,i.setFrame("brown_cream_square.png"),e.features.pop(),e.features.push(a.BROWN)):(i=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","brown_cream_square.png"),i.scaleX=i.scaleY=.9,e.add(i),i.x=-1,i.y=s,e.features.push(a.BROWN))}}))}else this.shake(this.frameSpot)}doPinkCream(){if(this.resultText.visible)return;let e=this.getCakeByPos(this.creamSpot);if(!e)return this.shake(this.creamSpot),void this.hightlight(this.buttonHightlight);let t=this.getEnd(e.features);if(null!=t&&t!=o.CIRCLE&&t!=o.HEART&&t!=o.SQUARE){this.timer.visible&&this.timer.pause();let s=y.calPaddingY(e.features);this.creamSpot.play("pink-spot-animation"),this.creamSpot.on("animationcomplete",(()=>{this.creamSpot.off("animationcomplete");let i,r=this.add.sprite(this.creamSpot.x,this.creamSpot.y+this.creamSpot.displayHeight+50+s,"comfy-spritesheet","pink_line_00.png").setOrigin(.5);switch(r.setDepth(this.creamSpot.depth-1),r.play("pink-cream-animation"),r.on("animationcomplete",(()=>{this.timer.visible&&this.timer.resume(),r.off("animationcomplete"),r.removedFromScene(),r.destroy()})),this.getStart(e.features)){case o.CIRCLE:t==a.BROWN||t==a.PINK||t==a.YELLOW?(i=e.last,i.setFrame("pink_cream_circle.png"),e.features.pop(),e.features.push(a.PINK)):(i=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","pink_cream_circle.png"),i.scaleX=i.scaleY=.9,e.add(i),i.x=-1,i.y=s,e.features.push(a.PINK));break;case o.HEART:t==a.BROWN||t==a.PINK||t==a.YELLOW?(i=e.last,i.setFrame("pink_cream_heart.png"),e.features.pop(),e.features.push(a.PINK)):(i=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","pink_cream_heart.png"),i.scaleX=i.scaleY=.9,e.add(i),i.x=-1,i.y=s,e.features.push(a.PINK));break;case o.SQUARE:t==a.BROWN||t==a.PINK||t==a.YELLOW?(i=e.last,i.setFrame("pink_cream_square.png"),e.features.pop(),e.features.push(a.PINK)):(i=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","pink_cream_square.png"),i.scaleX=i.scaleY=.9,e.add(i),i.x=-1,i.y=s,e.features.push(a.PINK))}}))}else this.shake(this.frameSpot)}doYellowCream(){if(this.resultText.visible)return;let e=this.getCakeByPos(this.creamSpot);if(!e)return this.shake(this.creamSpot),void this.hightlight(this.buttonHightlight);let t=this.getEnd(e.features);if(null!=t&&t!=o.CIRCLE&&t!=o.HEART&&t!=o.SQUARE){this.timer.visible&&this.timer.pause();let s=y.calPaddingY(e.features);this.creamSpot.play("yellow-spot-animation"),this.creamSpot.on("animationcomplete",(()=>{this.creamSpot.off("animationcomplete");let i,r=this.add.sprite(this.creamSpot.x,this.creamSpot.y+this.creamSpot.displayHeight+50+s,"comfy-spritesheet","yellow_line_00.png").setOrigin(.5);switch(r.setDepth(this.creamSpot.depth-1),r.play("yellow-cream-animation"),r.on("animationcomplete",(()=>{this.timer.visible&&this.timer.resume(),r.off("animationcomplete"),r.removedFromScene(),r.destroy()})),this.getStart(e.features)){case o.CIRCLE:t==a.BROWN||t==a.PINK||t==a.YELLOW?(i=e.last,i.setFrame("yellow_cream_circle.png"),e.features.pop(),e.features.push(a.YELLOW)):(i=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","yellow_cream_circle.png"),i.scaleX=i.scaleY=.9,e.add(i),i.x=-1,i.y=s,e.features.push(a.YELLOW));break;case o.HEART:t==a.BROWN||t==a.PINK||t==a.YELLOW?(i=e.last,i.setFrame("yellow_cream_heart.png"),e.features.pop(),e.features.push(a.YELLOW)):(i=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","yellow_cream_heart.png"),i.scaleX=i.scaleY=.9,e.add(i),i.x=-1,i.y=s,e.features.push(a.YELLOW));break;case o.SQUARE:t==a.BROWN||t==a.PINK||t==a.YELLOW?(i=e.last,i.setFrame("yellow_cream_square.png"),e.features.pop(),e.features.push(a.YELLOW)):(i=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","yellow_cream_square.png"),i.scaleX=i.scaleY=.9,e.add(i),i.x=-1,i.y=s,e.features.push(a.YELLOW))}}))}else this.shake(this.frameSpot)}doButtonsIcon(){if(this.resultText.visible)return;let e=this.getCakeByPos(this.decorateSpot);if(!e)return this.shake(this.decorateSpot),void this.hightlight(this.buttonHightlight);let t=this.getEnd(e.features);if(t!=o.CIRCLE&&t!=o.HEART&&t!=o.SQUARE){this.timer.visible&&this.timer.pause();let s=y.calPaddingY(e.features);if(t!==n.BUTTONS&&t!==n.EMOTICON&&t!==n.HEART&&t!==n.LEAF){let t=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y+this.decorateSpot.displayHeight,"comfy-spritesheet","buttons_00.png").setOrigin(.5);t.play("buttons-animation"),this.add.tween({targets:t,y:e.y+s-10,duration:200,onComplete:()=>{},callbackScope:this}),t.on("animationcomplete",(()=>{this.timer.visible&&this.timer.resume(),t.off("animationcomplete"),t.removedFromScene(),t.destroy();let i=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y,"comfy-spritesheet","buttons_icon.png").setOrigin(.5);i.x=0,i.y=s,e.add(i)})),e.features.push(n.BUTTONS)}else{let t=e.last;e.remove(t),t.removedFromScene(),t.destroy();let i=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y+this.decorateSpot.displayHeight,"comfy-spritesheet","buttons_00.png").setOrigin(0,.5);i.play("buttons-animation"),this.add.tween({targets:i,y:e.y+s-10,duration:200,onComplete:()=>{},callbackScope:this}),i.on("animationcomplete",(()=>{this.timer.visible&&this.timer.resume(),i.off("animationcomplete"),i.removedFromScene(),i.destroy();let t=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y,"comfy-spritesheet","buttons_icon.png").setOrigin(.5);t.x=0,t.y=s,e.add(t)})),e.features.pop(),e.features.push(n.BUTTONS)}u.level==c.EASY&&this.showChar()}}doHeartIcon(){if(this.resultText.visible)return;let e=this.getCakeByPos(this.decorateSpot);if(!e)return this.shake(this.decorateSpot),void this.hightlight(this.buttonHightlight);let t=this.getEnd(e.features);if(t!=o.CIRCLE&&t!=o.HEART&&t!=o.SQUARE){this.timer.visible&&this.timer.pause();let s=y.calPaddingY(e.features);if(t!==n.BUTTONS&&t!==n.EMOTICON&&t!==n.HEART&&t!==n.LEAF){let t=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y+this.decorateSpot.displayHeight,"comfy-spritesheet","heart_icon_00.png").setOrigin(0,.5);t.play("heart-animation"),this.add.tween({targets:t,y:e.y+s-10,duration:200,onComplete:()=>{},callbackScope:this}),t.on("animationcomplete",(()=>{this.timer.visible&&this.timer.resume(),t.off("animationcomplete"),t.removedFromScene(),t.destroy();let i=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y,"comfy-spritesheet","heart_icon.png").setOrigin(.5);e.add(i),i.x=0,i.y=s})),e.features.push(n.HEART)}else{let t=e.last;e.remove(t),t.removedFromScene(),t.destroy();let i=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y+this.decorateSpot.displayHeight,"comfy-spritesheet","heart_icon_00.png").setOrigin(0,.5);i.play("heart-animation"),this.add.tween({targets:i,y:e.y+s-10,duration:200,onComplete:()=>{},callbackScope:this}),i.on("animationcomplete",(()=>{this.timer.visible&&this.timer.resume(),i.off("animationcomplete"),i.removedFromScene(),i.destroy();let t=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y,"comfy-spritesheet","heart_icon.png").setOrigin(.5);t.x=0,t.y=s,e.add(t)})),e.features.pop(),e.features.push(n.HEART)}u.level==c.EASY&&this.showChar()}}doEmoticon(){if(this.resultText.visible)return;let e=this.getCakeByPos(this.decorateSpot);if(!e)return this.shake(this.decorateSpot),void this.hightlight(this.buttonHightlight);let t=this.getEnd(e.features);if(t!=o.CIRCLE&&t!=o.HEART&&t!=o.SQUARE){this.timer.visible&&this.timer.pause();let s=y.calPaddingY(e.features);if(t!==n.BUTTONS&&t!==n.EMOTICON&&t!==n.HEART&&t!==n.LEAF){let t=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y+this.decorateSpot.displayHeight,"comfy-spritesheet","emoticon_00.png").setOrigin(0,.5);t.play("emoticon-animation"),this.add.tween({targets:t,y:e.y+s-10,duration:200,onComplete:()=>{},callbackScope:this}),t.on("animationcomplete",(()=>{this.timer.visible&&this.timer.resume(),t.off("animationcomplete"),t.removedFromScene(),t.destroy();let i=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y,"comfy-spritesheet","emoticon_icon.png").setOrigin(.5);i.x=0,i.y=s,e.add(i)})),e.features.push(n.EMOTICON)}else{let t=e.last;e.remove(t),t.removedFromScene(),t.destroy();let i=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y+this.decorateSpot.displayHeight,"comfy-spritesheet","emoticon_00.png").setOrigin(0,.5);i.play("emoticon-animation"),this.add.tween({targets:i,y:e.y+s-10,duration:200,onComplete:()=>{},callbackScope:this}),i.on("animationcomplete",(()=>{this.timer.visible&&this.timer.resume(),i.off("animationcomplete"),i.removedFromScene(),i.destroy();let t=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y,"comfy-spritesheet","emoticon_icon.png").setOrigin(.5);t.x=0,t.y=s,e.add(t)})),e.features.pop(),e.features.push(n.EMOTICON)}u.level==c.EASY&&this.showChar()}}doLeafIcon(){if(this.resultText.visible)return;let e=this.getCakeByPos(this.decorateSpot);if(!e)return this.shake(this.decorateSpot),void this.hightlight(this.buttonHightlight);let t=this.getEnd(e.features);if(t!=o.CIRCLE&&t!=o.HEART&&t!=o.SQUARE){this.timer.visible&&this.timer.pause();let s=y.calPaddingY(e.features);if(t!==n.BUTTONS&&t!==n.EMOTICON&&t!==n.HEART&&t!==n.LEAF){let t=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y+this.decorateSpot.displayHeight,"comfy-spritesheet","leaf_00.png").setOrigin(0,.5);t.scaleX=t.scaleY=1.5,t.play("leaf-animation"),this.add.tween({targets:t,y:e.y+s-10,duration:200,onComplete:()=>{},callbackScope:this}),t.on("animationcomplete",(()=>{this.timer.visible&&this.timer.resume(),t.off("animationcomplete"),t.removedFromScene(),t.destroy();let i=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y,"comfy-spritesheet","leaf_icon.png").setOrigin(.5);i.x=0,i.y=s,e.add(i)})),e.features.push(n.LEAF)}else{let t=e.last;e.remove(t),t.removedFromScene(),t.destroy();let i=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y+this.decorateSpot.displayHeight,"comfy-spritesheet","leaf_00.png").setOrigin(0,.5);i.scaleX=i.scaleY=1.5,i.play("leaf-animation"),this.add.tween({targets:i,y:e.y+s-10,duration:200,onComplete:()=>{},callbackScope:this}),i.on("animationcomplete",(()=>{this.timer.visible&&this.timer.resume(),i.off("animationcomplete"),i.removedFromScene(),i.destroy();let t=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y,"comfy-spritesheet","leaf_icon.png").setOrigin(.5);t.x=0,t.y=s,e.add(t)})),e.features.pop(),e.features.push(n.LEAF)}u.level==c.EASY&&this.showChar()}}update(e,t){this.timer.visible&&this.timer.update()}getCakeByPos(e){let t=null;for(let s=0;s<this.cakes.length;s++)if(this.cakes[s].x==e.x)return t=this.cakes[s],t;return t}getEnd(e){return e[e.length-1]}getStart(e){return e[0]}getFirst(e){return e[1]}getLast(e){return e[e.length-2]}hightlight(e){e.visible=!0,e.alpha=0,this.add.tween({targets:e,alpha:1,duration:200,yoyo:!0,repeat:2,onComplete:()=>{e.visible=!1}})}canMove(e,t){for(let s=0;s<this.cakes.length;s++)if(this.cakes[s].x==e&&this.cakes[s].y==t)return!1;return!0}getIndex(e){for(let t=0;t<this.cakes.length;t++)if(this.cakes[t]==e)return t;return null}shake(e){this.tweens.add({targets:e,x:"+=20",duration:50,yoyo:!0,repeat:1})}isExistMakingCake(){for(let e=0;e<this.cakes.length;e++)if(this.cakes[e].features.length>0)return!0;return!1}}class J extends p().Scene{constructor(){super("MenuScene")}editorCreate(){const e=this.add.text(369,224,"",{});e.text="Easy";const t=this.add.text(369,269,"",{});t.text="Intermediate";const s=this.add.text(369,314,"",{});s.text="Advanced";const i=this.add.image(0,0,"canvasIcon");i.visible=!1,new Q(e),new Q(t),new Q(s),new w(i),this.easy=e,this.intermediate=t,this.advanced=s,this.canvasRef=i,this.events.emit("scene-awake")}create(){this.editorCreate(),g.setCurrentScene(this),this.easy.on("pointerdown",(()=>{window.parent.postMessage(c.EASY,"*"),u.level=c.EASY,g.enterPlayScene()})),this.intermediate.on("pointerdown",(()=>{window.parent.postMessage(c.INTERMEDIATE,"*"),u.level=c.INTERMEDIATE,g.enterPlayScene()})),this.advanced.on("pointerdown",(()=>{window.parent.postMessage(c.ADVANCED,"*"),u.level=c.ADVANCED,g.enterPlayScene()}))}}const Z=s.p+"asset-packs/preload-asset-pack-a0c8695f98f8afae49e5.json";class $ extends E{constructor(e){super(e),this.gameObject=e,e.__PreloadText=this,this.scene.load.on(p().Loader.Events.PROGRESS,(e=>{this.gameObject.text=Math.floor(100*e)+"%"}))}static getComponent(e){return e.__PreloadText}}const ee=s.p+"asset-packs/asset-pack-f69c59fd58aaac33799f.json";class te extends p().Scene{constructor(){super("Preload")}editorCreate(){const e=this.add.image(400,219,"guapen");e.scaleX=.5915891440784282,e.scaleY=.5915891440784282;const t=this.add.text(400,349,"",{});t.setOrigin(.5,.5),t.text="0%",t.setStyle({fontSize:"30px"});const s=this.add.image(0,0,"canvasIcon");s.visible=!1,new $(t),new w(s),this.events.emit("scene-awake")}preload(){this.editorCreate(),g.setCurrentScene(this),this.load.pack("asset-pack",ee),this.load.on(p().Loader.Events.COMPLETE,(()=>{g.enterMenuScene()}))}create(){}}class se extends p().Scene{constructor(){super("Boot")}preload(){this.load.pack("pack",Z)}create(){g.setCurrentScene(this),g.init()}}window.addEventListener("load",(function(){globalThis.screenBaseSize={width:800,height:496},new(p().Game)({type:p().AUTO,scale:{mode:p().Scale.RESIZE,parent:"game",width:800,height:496},dom:{createContainer:!0},backgroundColor:"#2f2f2f",scene:[se,te,z,J]}).scene.start("Boot")}))}},a={};function r(e){var t=a[e];if(void 0!==t){if(void 0!==t.error)throw t.error;return t.exports}var s=a[e]={exports:{}};try{var n={id:e,module:s,factory:i[e],require:r};r.i.forEach((function(e){e(n)})),s=n.module,n.factory.call(s.exports,s,s.exports,n.require)}catch(e){throw s.error=e,e}return s.exports}r.m=i,r.c=a,r.i=[],e=[],r.O=(t,s,i,a)=>{if(!s){var n=1/0;for(c=0;c<e.length;c++){for(var[s,i,a]=e[c],o=!0,h=0;h<s.length;h++)(!1&a||n>=a)&&Object.keys(r.O).every((e=>r.O[e](s[h])))?s.splice(h--,1):(o=!1,a<n&&(n=a));if(o){e.splice(c--,1);var l=i();void 0!==l&&(t=l)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[s,i,a]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.hu=e=>e+"."+r.h()+".hot-update.js",r.hmrF=()=>"main."+r.h()+".hot-update.json",r.h=()=>"ce3ac4deb34c9b9d5b06",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},s="phaser3-webpack-template:",r.l=(e,i,a,n)=>{if(t[e])t[e].push(i);else{var o,h;if(void 0!==a)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==s+a){o=d;break}}o||(h=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.setAttribute("data-webpack",s+a),o.src=e),t[e]=[i];var p=(s,i)=>{o.onerror=o.onload=null,clearTimeout(m);var a=t[e];if(delete t[e],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((e=>e(i))),s)return s(i)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=p.bind(null,o.onerror),o.onload=p.bind(null,o.onload),h&&document.head.appendChild(o)}},(()=>{var e,t,s,i={},a=r.c,n=[],o=[],h="idle",l=0,c=[];function d(e){h=e;for(var t=[],s=0;s<o.length;s++)t[s]=o[s].call(null,e);return Promise.all(t)}function p(){0==--l&&d("ready").then((function(){if(0===l){var e=c;c=[];for(var t=0;t<e.length;t++)e[t]()}}))}function m(e){if("idle"!==h)throw new Error("check() is only allowed in idle status");return d("check").then(r.hmrM).then((function(s){return s?d("prepare").then((function(){var i=[];return t=[],Promise.all(Object.keys(r.hmrC).reduce((function(e,a){return r.hmrC[a](s.c,s.r,s.m,e,t,i),e}),[])).then((function(){return t=function(){return e?g(e):d("ready").then((function(){return i}))},0===l?t():new Promise((function(e){c.push((function(){e(t())}))}));var t}))})):d(f()?"ready":"idle").then((function(){return null}))}))}function u(e){return"ready"!==h?Promise.resolve().then((function(){throw new Error("apply() is only allowed in ready status (state: "+h+")")})):g(e)}function g(e){e=e||{},f();var i=t.map((function(t){return t(e)}));t=void 0;var a=i.map((function(e){return e.error})).filter(Boolean);if(a.length>0)return d("abort").then((function(){throw a[0]}));var r=d("dispose");i.forEach((function(e){e.dispose&&e.dispose()}));var n,o=d("apply"),h=function(e){n||(n=e)},l=[];return i.forEach((function(e){if(e.apply){var t=e.apply(h);if(t)for(var s=0;s<t.length;s++)l.push(t[s])}})),Promise.all([r,o]).then((function(){return n?d("fail").then((function(){throw n})):s?g(e).then((function(e){return l.forEach((function(t){e.indexOf(t)<0&&e.push(t)})),e})):d("idle").then((function(){return l}))}))}function f(){if(s)return t||(t=[]),Object.keys(r.hmrI).forEach((function(e){s.forEach((function(s){r.hmrI[e](s,t)}))})),s=void 0,!0}r.hmrD=i,r.i.push((function(c){var g,f,b,y,E=c.module,_=function(t,s){var i=a[s];if(!i)return t;var r=function(r){if(i.hot.active){if(a[r]){var o=a[r].parents;-1===o.indexOf(s)&&o.push(s)}else n=[s],e=r;-1===i.children.indexOf(r)&&i.children.push(r)}else console.warn("[HMR] unexpected require("+r+") from disposed module "+s),n=[];return t(r)},o=function(e){return{configurable:!0,enumerable:!0,get:function(){return t[e]},set:function(s){t[e]=s}}};for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&"e"!==c&&Object.defineProperty(r,c,o(c));return r.e=function(e){return function(e){switch(h){case"ready":d("prepare");case"prepare":return l++,e.then(p,p),e;default:return e}}(t.e(e))},r}(c.require,c.id);E.hot=(g=c.id,f=E,y={_acceptedDependencies:{},_acceptedErrorHandlers:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:b=e!==g,_requireSelf:function(){n=f.parents.slice(),e=b?void 0:g,r(g)},active:!0,accept:function(e,t,s){if(void 0===e)y._selfAccepted=!0;else if("function"==typeof e)y._selfAccepted=e;else if("object"==typeof e&&null!==e)for(var i=0;i<e.length;i++)y._acceptedDependencies[e[i]]=t||function(){},y._acceptedErrorHandlers[e[i]]=s;else y._acceptedDependencies[e]=t||function(){},y._acceptedErrorHandlers[e]=s},decline:function(e){if(void 0===e)y._selfDeclined=!0;else if("object"==typeof e&&null!==e)for(var t=0;t<e.length;t++)y._declinedDependencies[e[t]]=!0;else y._declinedDependencies[e]=!0},dispose:function(e){y._disposeHandlers.push(e)},addDisposeHandler:function(e){y._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=y._disposeHandlers.indexOf(e);t>=0&&y._disposeHandlers.splice(t,1)},invalidate:function(){switch(this._selfInvalidated=!0,h){case"idle":t=[],Object.keys(r.hmrI).forEach((function(e){r.hmrI[e](g,t)})),d("ready");break;case"ready":Object.keys(r.hmrI).forEach((function(e){r.hmrI[e](g,t)}));break;case"prepare":case"check":case"dispose":case"apply":(s=s||[]).push(g)}},check:m,apply:u,status:function(e){if(!e)return h;o.push(e)},addStatusHandler:function(e){o.push(e)},removeStatusHandler:function(e){var t=o.indexOf(e);t>=0&&o.splice(t,1)},data:i[g]},e=void 0,y),E.parents=n,E.children=[],n=[],c.require=_})),r.hmrC={},r.hmrI={}})(),(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");s.length&&(e=s[s.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{var e,t,s,i,a,n=r.hmrS_jsonp=r.hmrS_jsonp||{179:0},o={};function h(t,s){return e=s,new Promise(((e,s)=>{o[t]=e;var i=r.p+r.hu(t),a=new Error;r.l(i,(e=>{if(o[t]){o[t]=void 0;var i=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;a.message="Loading hot update chunk "+t+" failed.\n("+i+": "+r+")",a.name="ChunkLoadError",a.type=i,a.request=r,s(a)}}))}))}function l(e){function o(e){for(var t=[e],s={},i=t.map((function(e){return{chain:[e],id:e}}));i.length>0;){var a=i.pop(),n=a.id,o=a.chain,l=r.c[n];if(l&&(!l.hot._selfAccepted||l.hot._selfInvalidated)){if(l.hot._selfDeclined)return{type:"self-declined",chain:o,moduleId:n};if(l.hot._main)return{type:"unaccepted",chain:o,moduleId:n};for(var c=0;c<l.parents.length;c++){var d=l.parents[c],p=r.c[d];if(p){if(p.hot._declinedDependencies[n])return{type:"declined",chain:o.concat([d]),moduleId:n,parentId:d};-1===t.indexOf(d)&&(p.hot._acceptedDependencies[n]?(s[d]||(s[d]=[]),h(s[d],[n])):(delete s[d],t.push(d),i.push({chain:o.concat([d]),id:d})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:s}}function h(e,t){for(var s=0;s<t.length;s++){var i=t[s];-1===e.indexOf(i)&&e.push(i)}}r.f&&delete r.f.jsonpHmr,t=void 0;var l={},c=[],d={},p=function(e){console.warn("[HMR] unexpected require("+e.id+") to disposed module")};for(var m in s)if(r.o(s,m)){var u,g=s[m],f=!1,b=!1,y=!1,E="";switch((u=g?o(m):{type:"disposed",moduleId:m}).chain&&(E="\nUpdate propagation: "+u.chain.join(" -> ")),u.type){case"self-declined":e.onDeclined&&e.onDeclined(u),e.ignoreDeclined||(f=new Error("Aborted because of self decline: "+u.moduleId+E));break;case"declined":e.onDeclined&&e.onDeclined(u),e.ignoreDeclined||(f=new Error("Aborted because of declined dependency: "+u.moduleId+" in "+u.parentId+E));break;case"unaccepted":e.onUnaccepted&&e.onUnaccepted(u),e.ignoreUnaccepted||(f=new Error("Aborted because "+m+" is not accepted"+E));break;case"accepted":e.onAccepted&&e.onAccepted(u),b=!0;break;case"disposed":e.onDisposed&&e.onDisposed(u),y=!0;break;default:throw new Error("Unexception type "+u.type)}if(f)return{error:f};if(b)for(m in d[m]=g,h(c,u.outdatedModules),u.outdatedDependencies)r.o(u.outdatedDependencies,m)&&(l[m]||(l[m]=[]),h(l[m],u.outdatedDependencies[m]));y&&(h(c,[u.moduleId]),d[m]=p)}s=void 0;for(var _,S=[],v=0;v<c.length;v++){var w=c[v],C=r.c[w];C&&(C.hot._selfAccepted||C.hot._main)&&d[w]!==p&&!C.hot._selfInvalidated&&S.push({module:w,require:C.hot._requireSelf,errorHandler:C.hot._selfAccepted})}return{dispose:function(){var e;i.forEach((function(e){delete n[e]})),i=void 0;for(var t,s=c.slice();s.length>0;){var a=s.pop(),o=r.c[a];if(o){var h={},d=o.hot._disposeHandlers;for(v=0;v<d.length;v++)d[v].call(null,h);for(r.hmrD[a]=h,o.hot.active=!1,delete r.c[a],delete l[a],v=0;v<o.children.length;v++){var p=r.c[o.children[v]];p&&(e=p.parents.indexOf(a))>=0&&p.parents.splice(e,1)}}}for(var m in l)if(r.o(l,m)&&(o=r.c[m]))for(_=l[m],v=0;v<_.length;v++)t=_[v],(e=o.children.indexOf(t))>=0&&o.children.splice(e,1)},apply:function(t){for(var s in d)r.o(d,s)&&(r.m[s]=d[s]);for(var i=0;i<a.length;i++)a[i](r);for(var n in l)if(r.o(l,n)){var o=r.c[n];if(o){_=l[n];for(var h=[],p=[],m=[],u=0;u<_.length;u++){var g=_[u],f=o.hot._acceptedDependencies[g],b=o.hot._acceptedErrorHandlers[g];if(f){if(-1!==h.indexOf(f))continue;h.push(f),p.push(b),m.push(g)}}for(var y=0;y<h.length;y++)try{h[y].call(null,_)}catch(s){if("function"==typeof p[y])try{p[y](s,{moduleId:n,dependencyId:m[y]})}catch(i){e.onErrored&&e.onErrored({type:"accept-error-handler-errored",moduleId:n,dependencyId:m[y],error:i,originalError:s}),e.ignoreErrored||(t(i),t(s))}else e.onErrored&&e.onErrored({type:"accept-errored",moduleId:n,dependencyId:m[y],error:s}),e.ignoreErrored||t(s)}}}for(var E=0;E<S.length;E++){var v=S[E],w=v.module;try{v.require(w)}catch(s){if("function"==typeof v.errorHandler)try{v.errorHandler(s,{moduleId:w,module:r.c[w]})}catch(i){e.onErrored&&e.onErrored({type:"self-accept-error-handler-errored",moduleId:w,error:i,originalError:s}),e.ignoreErrored||(t(i),t(s))}else e.onErrored&&e.onErrored({type:"self-accept-errored",moduleId:w,error:s}),e.ignoreErrored||t(s)}}return c}}}self.webpackHotUpdatephaser3_webpack_template=(t,i,n)=>{for(var h in i)r.o(i,h)&&(s[h]=i[h],e&&e.push(h));n&&a.push(n),o[t]&&(o[t](),o[t]=void 0)},r.hmrI.jsonp=function(e,t){s||(s={},a=[],i=[],t.push(l)),r.o(s,e)||(s[e]=r.m[e])},r.hmrC.jsonp=function(e,o,c,d,p,m){p.push(l),t={},i=o,s=c.reduce((function(e,t){return e[t]=!1,e}),{}),a=[],e.forEach((function(e){r.o(n,e)&&void 0!==n[e]?(d.push(h(e,m)),t[e]=!0):t[e]=!1})),r.f&&(r.f.jsonpHmr=function(e,s){t&&r.o(t,e)&&!t[e]&&(s.push(h(e)),t[e]=!0)})},r.hmrM=()=>{if("undefined"==typeof fetch)throw new Error("No browser support: need fetch API");return fetch(r.p+r.hmrF()).then((e=>{if(404!==e.status){if(!e.ok)throw new Error("Failed to fetch update manifest "+e.statusText);return e.json()}}))},r.O.j=e=>0===n[e];var c=(e,t)=>{var s,i,[a,o,h]=t,l=0;if(a.some((e=>0!==n[e]))){for(s in o)r.o(o,s)&&(r.m[s]=o[s]);if(h)var c=h(r)}for(e&&e(t);l<a.length;l++)i=a[l],r.o(n,i)&&n[i]&&n[i][0](),n[i]=0;return r.O(c)},d=self.webpackChunkphaser3_webpack_template=self.webpackChunkphaser3_webpack_template||[];d.forEach(c.bind(null,0)),d.push=c.bind(null,d.push.bind(d))})();var n=r.O(void 0,[426],(()=>r(114)));n=r.O(n)})();